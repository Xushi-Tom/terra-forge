# TerraForge HTTPæœåŠ¡ APIæ¥å£æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

TerraForge HTTPæœåŠ¡æä¾›åœ°å½¢åˆ‡ç‰‡å’Œåœ°å›¾åˆ‡ç‰‡çš„RESTful APIæ¥å£ï¼Œæ”¯æŒæ™ºèƒ½å¤šé…ç½®æ¨èå’Œå®æ—¶è¿›åº¦ç›‘æ§ã€‚

**æœåŠ¡åœ°å€**: `http://localhost:8000`  
**APIç‰ˆæœ¬**: v2.8  
**æ¥å£æ€»æ•°**: 30+ä¸ªæ¥å£ï¼Œæ¶µç›–14å¤§åŠŸèƒ½æ¨¡å—  
**æ”¯æŒæ ¼å¼**: TIF, GeoTIFFç­‰æ …æ ¼æ•°æ®  
**æ›´æ–°æ—¶é—´**: 2025-07-26

### ğŸ—ï¸ æ ¸å¿ƒæ¶æ„
- **Javaåç«¯**: Spring Boot + MyBatis Plusï¼Œæä¾›é«˜æ€§èƒ½WebæœåŠ¡
- **PythonæœåŠ¡**: Flaskå¾®æœåŠ¡ï¼Œä¸“é—¨å¤„ç†åœ°ç†æ•°æ®åˆ‡ç‰‡ä»»åŠ¡
- **åœ°ç†å¼•æ“**: é›†æˆGDALã€CTBã€GeoToolsç­‰ä¸“ä¸šåœ°ç†ä¿¡æ¯å¤„ç†åº“
- **é‡åŒ–ç½‘æ ¼ç®—æ³•**: åŸºäºåŠè¾¹æ•°æ®ç»“æ„çš„é«˜ç²¾åº¦åœ°å½¢ç½‘æ ¼ç”Ÿæˆ
- **åˆ†å¸ƒå¼å¤„ç†**: æ”¯æŒå¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†ï¼Œæ™ºèƒ½å†…å­˜ç®¡ç†

### ğŸ“Š æ¥å£ç»Ÿè®¡

| åŠŸèƒ½æ¨¡å— | æ¥å£æ•°é‡ | è¯´æ˜ |
|----------|----------|------|
| **Pythonå¾®æœåŠ¡æ¥å£** |  |  |
| ä»»åŠ¡ç®¡ç† | 5ä¸ª | ä»»åŠ¡çŠ¶æ€ç›‘æ§ã€åœæ­¢ã€åˆ é™¤ã€æ¸…ç† |
| å·¥ä½œç©ºé—´ç®¡ç† | 4ä¸ª | æ–‡ä»¶å¤¹åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€ä¿¡æ¯æŸ¥è¯¢ |
| æ•°æ®æºç®¡ç† | 3ä¸ª | æ•°æ®æºæµè§ˆã€è¯¦æƒ…è·å–ã€æ™ºèƒ½æ¨è |
| ç“¦ç‰‡ç”Ÿæˆ | 3ä¸ª | åœ°å½¢ç“¦ç‰‡ã€ç´¢å¼•ç“¦ç‰‡ã€æ ¼å¼è½¬æ¢ |
| åœ°å½¢å¤„ç† | 2ä¸ª | åœ°å½¢ç“¦ç‰‡è§£å‹ã€layer.jsonæ›´æ–° |
| é€æ˜ç“¦ç‰‡ç®¡ç† | 2ä¸ª | æ‰«æå’Œåˆ é™¤åŒ…å«é€æ˜/nodataå€¼çš„ç“¦ç‰‡ |
| ç³»ç»Ÿä¿¡æ¯ | 2ä¸ª | ç³»ç»Ÿèµ„æºç›‘æ§ã€å®¹å™¨æ›´æ–° |
| ç³»ç»Ÿç›‘æ§ | 1ä¸ª | å¥åº·æ£€æŸ¥ |
| é…ç½®ç®¡ç† | 1ä¸ª | æ™ºèƒ½é…ç½®æ¨è |
| åˆ†æå·¥å…· | 1ä¸ª | ç¼©æ”¾çº§åˆ«æ¨è |
| APIæ–‡æ¡£ | 1ä¸ª | æ¥å£è·¯ç”±åˆ—è¡¨ |
| **Javaåç«¯æ¥å£** |  |  |
| Javaåœ°å½¢åˆ‡ç‰‡ | 3ä¸ª | æ–‡ä»¶ä¸Šä¼ åœ°å½¢åˆ‡ç‰‡ã€è·¯å¾„åœ°å½¢åˆ‡ç‰‡ã€TerraForge API |
| Javaåœ°å›¾åˆ‡ç‰‡ | 4ä¸ª | æ–‡ä»¶ä¸Šä¼ åœ°å›¾åˆ‡ç‰‡ã€è·¯å¾„åœ°å›¾åˆ‡ç‰‡ã€ç´¢å¼•ç“¦ç‰‡ã€é€æ˜ç“¦ç‰‡ç®¡ç† |
| ç“¦ç‰‡æœåŠ¡ | 4ä¸ª | TMSç“¦ç‰‡ã€XYZç“¦ç‰‡ã€WMTSæ ‡å‡†æœåŠ¡ã€RESTfulç“¦ç‰‡ |
| åœ°å½¢æœåŠ¡ | 2ä¸ª | åœ°å½¢ç“¦ç‰‡è·å–ã€layer.jsonè·å– |
| å·¥ä½œç©ºé—´æœåŠ¡ | 6ä¸ª | å·¥ä½œç©ºé—´åˆ›å»ºã€åˆ é™¤ã€çŠ¶æ€ç®¡ç†ç­‰ |
| **æ€»è®¡** | **44ä¸ª** | **å®Œæ•´çš„åœ°ç†ä¿¡æ¯å¤„ç†ç”Ÿæ€ç³»ç»Ÿ** |

### ğŸ†• æœ€æ–°åŠŸèƒ½
- ğŸ”¥ **åœ°å½¢ç“¦ç‰‡åˆå¹¶**: è‡ªåŠ¨åˆå¹¶å¤šä¸ªåœ°å½¢æ–‡ä»¶å¤¹åˆ°ç»Ÿä¸€ç›®å½•ï¼Œæ™ºèƒ½å¤„ç†layer.jsonå’Œç“¦ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒç¡¬é“¾æ¥ä¼˜åŒ–
- ğŸ”¥ **é€æ˜ç“¦ç‰‡ç®¡ç†**: æ™ºèƒ½æ£€æµ‹å’Œæ¸…ç†åŒ…å«é€æ˜/nodataå€¼çš„ç“¦ç‰‡ï¼Œé›¶å®¹å¿æ¨¡å¼ç¡®ä¿ç“¦ç‰‡è´¨é‡
- ğŸ”¥ **ç´¢å¼•ç“¦ç‰‡å¤„ç†**: åŸºäºç©ºé—´ç´¢å¼•çš„é«˜æ€§èƒ½ç“¦ç‰‡ç”Ÿæˆï¼Œæ”¯æŒå¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†
- ğŸ”¥ **æ™ºèƒ½ç“¦ç‰‡åˆå¹¶**: è‡ªåŠ¨æ£€æµ‹ç©ºé—´å†²çªï¼Œæ”¯æŒé€æ˜åº¦æ··åˆå’Œè¦†ç›–ç­–ç•¥ï¼Œè§£å†³è¾¹ç•Œé‡å é—®é¢˜
- ğŸ”¥ **å·¥ä½œç©ºé—´ç®¡ç†**: æä¾›å®Œæ•´çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç®¡ç†APIï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œ
- ğŸ”¥ **å·¥ä½œç©ºé—´ç»Ÿè®¡**: è‡ªåŠ¨ç»Ÿè®¡å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼ŒæŒ‰æ–‡ä»¶ç±»å‹åˆ†ç±»å±•ç¤ºï¼Œæ”¯æŒæœ€è¿‘ä¿®æ”¹è®°å½•
- ğŸ›¡ï¸ **å®‰å…¨è·¯å¾„éªŒè¯**: é˜²æ­¢ç›®å½•éå†æ”»å‡»ï¼Œç¡®ä¿å·¥ä½œç©ºé—´æ“ä½œå®‰å…¨æ€§
- â­ **åˆ†çº§å¤„ç†ç­–ç•¥**: è§£å†³é«˜çº§åˆ«åœ°å›¾åˆ‡ç‰‡å¡æ­»é—®é¢˜ï¼Œ0-6çº§ä¸€èµ·å¤„ç†ï¼Œ7çº§ä»¥ä¸Šå•ç‹¬å¤„ç†
- â­ **æ™ºèƒ½æ–‡ä»¶ä¼˜åŒ–**: é¢„å…ˆä¼˜åŒ–TIFæ–‡ä»¶ç»“æ„ï¼Œé‡æ–°åˆ†å—å’Œå‹ç¼©ï¼Œæå‡åˆ‡ç‰‡æ•ˆç‡
- â­ **æ¦‚è§ˆé‡‘å­—å¡”**: è‡ªåŠ¨åˆ›å»ºå¤šçº§æ¦‚è§ˆï¼ŒåŠ é€Ÿæ•°æ®è®¿é—®å’Œæ¸²æŸ“
- â­ **è‡ªé€‚åº”å†…å­˜ç®¡ç†**: æ ¹æ®çº§åˆ«åŠ¨æ€è°ƒæ•´GDALç¼“å­˜å’Œç¯å¢ƒå˜é‡
- âœ… **åœ°ç†èŒƒå›´ç­›é€‰**: æ”¯æŒæŒ‰ç»çº¬åº¦èŒƒå›´ç­›é€‰TIFæ–‡ä»¶ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œå¤šä¸ªèŒƒå›´
- âœ… **ä»»åŠ¡åœæ­¢æ§åˆ¶**: æ”¯æŒåœæ­¢æ­£åœ¨è¿è¡Œçš„åˆ‡ç‰‡ä»»åŠ¡ï¼Œä¼˜é›…ç»ˆæ­¢è¿›ç¨‹
- âœ… **é€çº§ç›®å½•æµè§ˆ**: æ”¯æŒæ•°æ®æºç›®å½•çš„å¤šçº§è·¯å¾„å¯¼èˆª
- âœ… **æ™ºèƒ½å¤šé…ç½®æ¨è**: è‡ªåŠ¨ç”Ÿæˆé«˜é…ã€ä¸­é…ã€ä½é…ä¸‰å¥—å®Œæ•´æ–¹æ¡ˆ
- âœ… **è‡ªåŠ¨å‚æ•°ä¼˜åŒ–**: æ ¹æ®æ–‡ä»¶å¤§å°æ™ºèƒ½æ¨èçº§åˆ«èŒƒå›´å’Œç¡¬ä»¶é…ç½®  
- âœ… **ç²¾ç¡®æ—¶é—´ä¼°ç®—**: åŸºäºæ¨èé…ç½®è®¡ç®—çœŸå®å¤„ç†æ—¶é—´
- âœ… **å®æ—¶è¿›åº¦ç›‘æ§**: æ”¯æŒç“¦ç‰‡ç”Ÿæˆè¿›åº¦ã€å¤„ç†é€Ÿåº¦ã€é¢„è®¡å‰©ä½™æ—¶é—´
- âœ… **å°é©¼å³°å‚æ•°æ ¼å¼**: ç»Ÿä¸€ä½¿ç”¨å°é©¼å³°å‘½åçš„è¯·æ±‚å’Œå“åº”å‚æ•°
- âœ… **å®‰å…¨è·¯å¾„æ§åˆ¶**: é˜²æ­¢ç›®å½•éå†æ”»å‡»ï¼Œç¡®ä¿æ•°æ®å®‰å…¨

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿
- **é«˜æ•ˆå¤„ç†**: åˆ†çº§å¤„ç†ç­–ç•¥å½»åº•è§£å†³å¤§æ–‡ä»¶é«˜çº§åˆ«åˆ‡ç‰‡å¡æ­»é—®é¢˜
- **æ™ºèƒ½æ¨è**: åŸºäºæ–‡ä»¶å¤§å°å’Œç³»ç»Ÿèµ„æºè‡ªåŠ¨æ¨èæœ€ä½³é…ç½®
- **ç´¢å¼•ä¼˜åŒ–**: æ”¯æŒåŸºäºç©ºé—´ç´¢å¼•çš„ç²¾ç¡®ç“¦ç‰‡ç”Ÿæˆï¼Œå¤§å¹…æå‡å¤„ç†æ•ˆç‡
- **ç©ºé—´æ™ºèƒ½**: è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç©ºé—´å†²çªï¼Œæ™ºèƒ½åˆå¹¶é‡å åŒºåŸŸ
- **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„ä»»åŠ¡ç®¡ç†ã€é”™è¯¯å¤„ç†ã€å®‰å…¨æ§åˆ¶æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®¹å™¨éƒ¨ç½²
```bash
# å¯¼å…¥é•œåƒ
docker load -i terraforge-latest.tar

# å¯åŠ¨æœåŠ¡ï¼ˆæ¨èé…ç½®ï¼‰
docker run -d --name terraforge-api --memory=16g --shm-size=4g --cpus=4 \
  -p 8000:8000 \
  -v /Users/xushi/TIF:/app/dataSource \
  -v /Users/xushi/tiles:/app/tiles \
  -v /Users/xushi/log:/app/log \
  terraforge:latest python3 /app/app.py
```

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8000/api/health
```

## ğŸ“Š ç³»ç»ŸçŠ¶æ€

### å¥åº·æ£€æŸ¥

**GET** `/api/health`

æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **çŠ¶æ€æ£€æŸ¥**: éªŒè¯Flaskåº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. **æ—¶é—´æˆ³ç”Ÿæˆ**: ä½¿ç”¨å½“å‰ç³»ç»Ÿæ—¶é—´ç”Ÿæˆæ—¶é—´æˆ³
3. **ç‰ˆæœ¬ä¿¡æ¯**: è¿”å›å›ºå®šçš„APIç‰ˆæœ¬ä¿¡æ¯
4. **JSONå“åº”**: å°è£…å¥åº·çŠ¶æ€ä¿¡æ¯å¹¶è¿”å›

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| status | string | æœåŠ¡çŠ¶æ€ï¼Œå›ºå®šå€¼"healthy" |
| timestamp | string | æ—¶é—´æˆ³ï¼Œæ ¼å¼ï¼šyyyy-MM-dd HH:mm:ss |
| version | string | APIç‰ˆæœ¬å· |

#### å“åº”ç¤ºä¾‹
```json
{
  "status": "healthy",
  "timestamp": "2025-01-08 16:45:00",
  "version": "1.0.0"
}
```

### ç³»ç»Ÿä¿¡æ¯

**GET** `/api/system/info`

è·å–ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **CPUç›‘æ§**: ä½¿ç”¨psutilè·å–CPUä½¿ç”¨ç‡ã€æ ¸å¿ƒæ•°ç­‰ä¿¡æ¯
2. **å†…å­˜åˆ†æ**: è·å–å†…å­˜ä½¿ç”¨ç‡ã€æ€»é‡ã€å¯ç”¨é‡ç­‰
3. **ç£ç›˜ç»Ÿè®¡**: åˆ†æç£ç›˜ä½¿ç”¨æƒ…å†µå’Œå‰©ä½™ç©ºé—´
4. **ä»»åŠ¡ç»Ÿè®¡**: ç»Ÿè®¡å½“å‰æ´»è·ƒä»»åŠ¡å’Œå†å²ä»»åŠ¡æ•°é‡
5. **æ ¼å¼åŒ–å¤„ç†**: å°†å­—èŠ‚æ•°è½¬æ¢ä¸ºäººç±»å¯è¯»æ ¼å¼
6. **JSONå°è£…**: ç»“æ„åŒ–è¿”å›ç³»ç»Ÿä¿¡æ¯

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| cpu.percent | number | CPUä½¿ç”¨ç‡ç™¾åˆ†æ¯” (0-100) |
| cpu.count | number | é€»è¾‘CPUæ ¸å¿ƒæ•° |
| cpu.physicalCount | number | ç‰©ç†CPUæ ¸å¿ƒæ•° |
| memory.percent | number | å†…å­˜ä½¿ç”¨ç‡ç™¾åˆ†æ¯” (0-100) |
| memory.totalFormatted | string | æ€»å†…å­˜å®¹é‡ï¼Œå¸¦å•ä½ |
| memory.availableFormatted | string | å¯ç”¨å†…å­˜ï¼Œå¸¦å•ä½ |
| disk.percent | number | ç£ç›˜ä½¿ç”¨ç‡ç™¾åˆ†æ¯” (0-100) |
| disk.totalFormatted | string | ç£ç›˜æ€»å®¹é‡ï¼Œå¸¦å•ä½ |
| disk.freeFormatted | string | å‰©ä½™å®¹é‡ï¼Œå¸¦å•ä½ |
| tasks.activeTasks | number | å½“å‰æ´»è·ƒä»»åŠ¡æ•°é‡ |
| tasks.totalTasks | number | å†å²ä»»åŠ¡æ€»æ•° |

#### å“åº”ç¤ºä¾‹
```json
{
  "cpu": {
    "percent": 25.5,
    "count": 10,
    "physicalCount": 5
  },
  "memory": {
    "percent": 45.2,
    "totalFormatted": "16.0 GB",
    "availableFormatted": "8.7 GB"
  },
  "disk": {
    "percent": 35.8,
    "totalFormatted": "500.0 GB",
    "freeFormatted": "321.0 GB"
  },
  "tasks": {
    "activeTasks": 2,
    "totalTasks": 15
  }
}
```

### å®¹å™¨æ›´æ–°

**POST** `/api/container/update`

æ›´æ–°Dockerå®¹å™¨ç³»ç»Ÿä¿¡æ¯ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **æ—¶é—´åŒæ­¥**: åŒæ­¥å®¹å™¨æ—¶é—´ä¸å®¿ä¸»æœºæ—¶é—´
2. **é…ç½®åˆ·æ–°**: é‡æ–°åŠ è½½ç³»ç»Ÿé…ç½®æ–‡ä»¶
3. **ç¼“å­˜æ¸…ç†**: æ¸…ç†ç³»ç»ŸçŠ¶æ€ç¼“å­˜
4. **ç¯å¢ƒæ›´æ–°**: æ›´æ–°ç¯å¢ƒå˜é‡å’Œç³»ç»Ÿå‚æ•°
5. **çŠ¶æ€ç¡®è®¤**: éªŒè¯æ›´æ–°æ“ä½œæ˜¯å¦æˆåŠŸ
6. **ç»“æœè¿”å›**: è¿”å›æ›´æ–°çŠ¶æ€å’Œæ—¶é—´æˆ³

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| updateType | string | å¦ | æ›´æ–°ç±»å‹ï¼š'all', 'time', 'config', 'environment', 'system' (é»˜è®¤: 'all') |
| timezone | string | å¦ | æ—¶åŒºè®¾ç½®ï¼Œå¦‚ 'Asia/Shanghai' |
| environment | object | å¦ | ç¯å¢ƒå˜é‡æ›´æ–°å¯¹è±¡ |
| config | object | å¦ | é…ç½®æ›´æ–°å¯¹è±¡ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "updateType": "all",
  "timezone": "Asia/Shanghai",
  "environment": {
    "GDAL_CACHEMAX": "1024",
    "GDAL_HTTP_TIMEOUT": "60"
  },
  "config": {
    "maxWorkers": 8,
    "tileSize": 256
  }
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| timestamp | string | æ›´æ–°æ—¶é—´æˆ³ |
| updateType | string | æ›´æ–°ç±»å‹ |
| version | string | ç³»ç»Ÿç‰ˆæœ¬ |
| results | object | æ›´æ–°ç»“æœè¯¦æƒ… |

#### å“åº”ç¤ºä¾‹
```json
{
  "timestamp": "2025-07-16T16:45:00.123456",
  "updateType": "all",
  "version": "v2.72",
  "results": {
    "time": {
      "actions": ["ä½¿ç”¨ntpdateåŒæ­¥ç½‘ç»œæ—¶é—´æˆåŠŸ"],
      "before": {
        "localTime": "2025-07-16 16:44:55",
        "utcTime": "2025-07-16 08:44:55 UTC"
      },
      "after": {
        "localTime": "2025-07-16 16:45:00",
        "utcTime": "2025-07-16 08:45:00 UTC"
      }
    },
    "environment": {
      "actions": ["æ›´æ–°ç¯å¢ƒå˜é‡ GDAL_CACHEMAX"],
      "updated": {
        "GDAL_CACHEMAX": {
          "old": "512",
          "new": "1024"
        }
      }
    },
    "config": {
      "actions": ["æ›´æ–°é…ç½® maxWorkers"],
      "updated": {
        "maxWorkers": {
          "old": 4,
          "new": 8
        }
      }
    }
  }
}
```

## ğŸ“ æ•°æ®æºç®¡ç†

### æµè§ˆæ•°æ®æºç›®å½•

**GET** `/api/dataSources`  
**GET** `/api/dataSources/<path:subpath>`

é€çº§æµè§ˆæ•°æ®æºç›®å½•å’Œæ–‡ä»¶ï¼Œæ”¯æŒå¤šçº§è·¯å¾„å’Œåœ°ç†èŒƒå›´ç­›é€‰ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **è·¯å¾„å®‰å…¨éªŒè¯**: æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨ç›®å½•éå†æ”»å‡»ï¼Œç¡®ä¿è·¯å¾„åœ¨å…è®¸èŒƒå›´å†…
2. **ç›®å½•æ‰«æ**: ä½¿ç”¨os.walkæˆ–os.listdiræ‰«ææŒ‡å®šç›®å½•
3. **æ–‡ä»¶è¿‡æ»¤**: ç­›é€‰.tifã€.tiffç­‰åœ°ç†æ•°æ®æ–‡ä»¶
4. **æ–‡ä»¶ä¿¡æ¯è·å–**: è·å–æ–‡ä»¶å¤§å°ã€ä¿®æ”¹æ—¶é—´ã€æ ¼å¼ç­‰åŸºæœ¬ä¿¡æ¯
5. **åœ°ç†èŒƒå›´è§£æ**: è§£æboundsæŸ¥è¯¢å‚æ•°ï¼Œæ”¯æŒå¤šç§æ ¼å¼
6. **GDALåˆ†æ**: ä½¿ç”¨GDALè§£æTIFæ–‡ä»¶çš„åœ°ç†è¾¹ç•Œä¿¡æ¯
7. **åœ°ç†ç­›é€‰**: æ ¹æ®è¾¹ç•Œå‚æ•°ç­›é€‰ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶
8. **ç»“æœæ’åº**: æŒ‰æ–‡ä»¶åæˆ–ä¿®æ”¹æ—¶é—´æ’åº
9. **JSONå°è£…**: è¿”å›ç»“æ„åŒ–çš„ç›®å½•å’Œæ–‡ä»¶ä¿¡æ¯

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| subpath | string | å¦ | å­ç›®å½•è·¯å¾„ï¼Œæ”¯æŒå¤šçº§ï¼Œå¦‚"folder1/folder2/folder3" |

#### æŸ¥è¯¢å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| bounds | string | å¦ | åœ°ç†èŒƒå›´ç­›é€‰ï¼ŒJSONæ ¼å¼ï¼Œæ”¯æŒå¤šç§æ ¼å¼ |

#### åœ°ç†èŒƒå›´æ ¼å¼æ”¯æŒ
- **å•ä¸ªèŒƒå›´æ•°ç»„**: `[west, south, east, north]`
- **å¤šä¸ªèŒƒå›´æ•°ç»„**: `[[west1, south1, east1, north1], [west2, south2, east2, north2]]`
- **å¯¹è±¡æ ¼å¼**: `[{"west": 116, "south": 39, "east": 117, "north": 40}]`

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| currentPath | string | å½“å‰è·¯å¾„ |
| parentPath | string\|null | çˆ¶çº§è·¯å¾„ï¼Œæ ¹ç›®å½•æ—¶ä¸ºnull |
| directories | array | å­ç›®å½•åˆ—è¡¨ |
| directories[].name | string | ç›®å½•å |
| directories[].path | string | ç›¸å¯¹è·¯å¾„ |
| directories[].itemCount | number | ç›®å½•å†…æ–‡ä»¶æ•°é‡ |
| directories[].type | string | å›ºå®šå€¼"directory" |
| datasources | array | æ•°æ®æºæ–‡ä»¶åˆ—è¡¨ |
| datasources[].name | string | æ–‡ä»¶å |
| datasources[].path | string | ç›¸å¯¹è·¯å¾„ |
| datasources[].fullPath | string | å®Œæ•´æ–‡ä»¶è·¯å¾„ |
| datasources[].size | number | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| datasources[].sizeFormatted | string | æ ¼å¼åŒ–çš„æ–‡ä»¶å¤§å° |
| datasources[].format | string | æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚".tif"ï¼‰ |
| datasources[].type | string | å›ºå®šå€¼"file" |
| datasources[].fileType | string | æ–‡ä»¶ç±»å‹ï¼š"geotiff"æˆ–"image" |
| datasources[].modified | string | æœ€åä¿®æ”¹æ—¶é—´ |
| totalDirectories | number | å­ç›®å½•æ€»æ•° |
| totalFiles | number | æ–‡ä»¶æ€»æ•° |
| filterInfo | object | ç­›é€‰ä¿¡æ¯ï¼ˆä½¿ç”¨åœ°ç†ç­›é€‰æ—¶ï¼‰ |

#### å“åº”ç¤ºä¾‹
```json
{
  "currentPath": "",
  "parentPath": null,
  "directories": [
    {
      "name": "satellite",
      "path": "satellite",
      "itemCount": 15,
      "type": "directory"
    }
  ],
  "datasources": [
    {
      "name": "taiwan.tif",
      "path": "taiwan.tif",
      "fullPath": "/app/dataSource/taiwan.tif",
      "size": 1139867648,
      "sizeFormatted": "1.06 GB",
      "format": ".tif",
      "type": "file",
      "fileType": "geotiff",
      "modified": "2024-06-30 16:45:00"
    }
  ],
  "totalDirectories": 1,
  "totalFiles": 1
}
```

### è·å–æ•°æ®æºè¯¦æƒ…

**GET** `/api/dataSources/info/<filename>`

è·å–æŒ‡å®šæ•°æ®æºçš„è¯¦ç»†ä¿¡æ¯å’Œæ™ºèƒ½å¤šé…ç½®æ¨èã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **æ–‡ä»¶å®‰å…¨éªŒè¯**: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ŒéªŒè¯è·¯å¾„å®‰å…¨æ€§
2. **GDALå…ƒæ•°æ®è§£æ**: ä½¿ç”¨gdalinfoè§£æTIFæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯
3. **åœ°ç†ä¿¡æ¯æå–**: æå–åæ ‡ç³»ã€æŠ•å½±ã€åœ°ç†è¾¹ç•Œç­‰ä¿¡æ¯
4. **æ³¢æ®µåˆ†æ**: åˆ†ææ³¢æ®µæ•°é‡ã€æ•°æ®ç±»å‹ã€é¢œè‰²è§£é‡Š
5. **åˆ†è¾¨ç‡è®¡ç®—**: è®¡ç®—åƒç´ åˆ†è¾¨ç‡å’Œåœ°é¢åˆ†è¾¨ç‡
6. **æ™ºèƒ½çº§åˆ«æ¨è**: æ ¹æ®åˆ†è¾¨ç‡å’Œæ–‡ä»¶å¤§å°è®¡ç®—æ¨èç¼©æ”¾çº§åˆ«
7. **é…ç½®ç”Ÿæˆ**: å¦‚æœæŒ‡å®štileTypeï¼Œç”Ÿæˆé«˜ä¸­ä½ä¸‰å¥—é…ç½®æ–¹æ¡ˆ
8. **æ€§èƒ½é¢„æµ‹**: é¢„æµ‹ä¸åŒé…ç½®çš„å¤„ç†æ—¶é—´å’Œèµ„æºæ¶ˆè€—
9. **JSONå°è£…**: è¿”å›å®Œæ•´çš„æ–‡ä»¶ä¿¡æ¯å’Œæ¨èé…ç½®

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| filename | string | æ˜¯ | æ•°æ®æºæ–‡ä»¶å |

#### æŸ¥è¯¢å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| tileType | string | å¦ | åˆ‡ç‰‡ç±»å‹ï¼š"map"æˆ–"terrain"ï¼Œæä¾›æ—¶è¿”å›æ™ºèƒ½é…ç½®æ¨è |

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| fileInfo | object | æ–‡ä»¶åŸºæœ¬ä¿¡æ¯ |
| fileInfo.filename | string | æ–‡ä»¶å |
| fileInfo.size | number | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| fileInfo.sizeFormatted | string | æ ¼å¼åŒ–çš„æ–‡ä»¶å¤§å° |
| fileInfo.path | string | æ–‡ä»¶å®Œæ•´è·¯å¾„ |
| fileInfo.gdalinfo | object | GDALæ–‡ä»¶ä¿¡æ¯è¯¦æƒ… |
| suggestedZoom | object | æ™ºèƒ½åˆ†çº§å»ºè®® |
| suggestedZoom.minZoom | number | å»ºè®®æœ€å°ç¼©æ”¾çº§åˆ« |
| suggestedZoom.maxZoom | number | å»ºè®®æœ€å¤§ç¼©æ”¾çº§åˆ« |
| suggestedZoom.strategy | string | åˆ†çº§ç­–ç•¥ï¼ˆ"conservative"æˆ–"full"ï¼‰ |
| recommendations | object | æ™ºèƒ½é…ç½®æ¨èï¼ˆtileTypeæä¾›æ—¶ï¼‰ |

#### å“åº”ç¤ºä¾‹
```json
{
  "fileInfo": {
    "filename": "taiwan.tif",
    "size": 1139867648,
    "sizeFormatted": "1.06 GB",
    "path": "/app/dataSource/taiwan.tif",
    "gdalinfo": {
      "driver": "GTiff/GeoTIFF",
      "size": "18892, 15028",
      "coordinateSystem": "WGS 84",
      "bands": [
        "Band 1: Block=18892x1 Type=Byte, ColorInterp=Red",
        "Band 2: Block=18892x1 Type=Byte, ColorInterp=Green",
        "Band 3: Block=18892x1 Type=Byte, ColorInterp=Blue"
      ]
    }
  },
  "suggestedZoom": {
    "minZoom": 5,
    "maxZoom": 15,
    "strategy": "conservative"
  }
}
```

## ğŸ—ºï¸ ç“¦ç‰‡ç”Ÿæˆ

### åˆ›å»ºåœ°å½¢ç“¦ç‰‡

**POST** `/api/tile/terrain`

ä½¿ç”¨CTBï¼ˆCesium Terrain Builderï¼‰æ‰¹é‡åˆ›å»ºåœ°å½¢ç“¦ç‰‡ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **å‚æ•°éªŒè¯**: éªŒè¯è¾“å…¥å‚æ•°çš„æœ‰æ•ˆæ€§ï¼Œè®¾ç½®åˆç†çš„é»˜è®¤å€¼
2. **æ–‡ä»¶æœç´¢**: æ ¹æ®folderPathså’ŒfilePatternsæŸ¥æ‰¾åŒ¹é…çš„TIFæ–‡ä»¶
3. **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤šä¸ªæ–‡ä»¶çš„æ‰¹é‡åœ°å½¢åˆ‡ç‰‡å¤„ç†
4. **ä»»åŠ¡åˆ›å»º**: ç”Ÿæˆå”¯ä¸€çš„ä»»åŠ¡IDï¼Œåˆ›å»ºä»»åŠ¡è®°å½•
5. **é¡ºåºå¤„ç†**: ä¾æ¬¡å¤„ç†æ¯ä¸ªæ–‡ä»¶ï¼Œé¿å…èµ„æºå†²çª
6. **CTBå‘½ä»¤æ„å»º**: æ ¹æ®å‚æ•°æ„å»ºCTBå‘½ä»¤è¡Œå‚æ•°
7. **å¼‚æ­¥è¿›ç¨‹å¯åŠ¨**: å¯åŠ¨å¼‚æ­¥è¿›ç¨‹æ‰§è¡Œåœ°å½¢åˆ‡ç‰‡
8. **è¿›åº¦ç›‘æ§**: è®¾ç½®è¿›åº¦ç›‘æ§å’ŒçŠ¶æ€æ›´æ–°æœºåˆ¶
9. **åå¤„ç†é…ç½®**: é…ç½®è‡ªåŠ¨è§£å‹å’Œlayer.jsonæ›´æ–°
10. **åœ°å½¢åˆå¹¶**: å½“mergeTerrains=trueæ—¶ï¼Œè‡ªåŠ¨åˆå¹¶å¤šä¸ªåœ°å½¢æ–‡ä»¶å¤¹åˆ°ç»Ÿä¸€ç›®å½•
11. **å“åº”è¿”å›**: è¿”å›ä»»åŠ¡ä¿¡æ¯å’ŒçŠ¶æ€æŸ¥è¯¢URL

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| folderPaths | array | æ˜¯ | - | æœç´¢æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨ï¼ˆç›¸å¯¹äºæ•°æ®æºç›®å½•ï¼‰ |
| filePatterns | array | å¦ | ["*.tif", "*.tiff"] | æ–‡ä»¶åŒ¹é…æ¨¡å¼åˆ—è¡¨ï¼Œæ”¯æŒé€šé…ç¬¦å’Œtxtæ–‡ä»¶åˆ—è¡¨ |
| outputPath | array | æ˜¯ | - | è¾“å‡ºè·¯å¾„æ•°ç»„ï¼Œå¦‚["terrain", "project", "v1"] |
| startZoom | number | å¦ | 0 | èµ·å§‹ç¼©æ”¾çº§åˆ«ï¼ˆç²—ç³™çº§åˆ«ï¼‰ |
| endZoom | number | å¦ | 8 | ç»“æŸç¼©æ”¾çº§åˆ«ï¼ˆè¯¦ç»†çº§åˆ«ï¼Œæœ€å°ä¸º8ï¼‰ |
| maxTriangles | number | å¦ | 6291456 | æœ€å¤§ä¸‰è§’å½¢æ•°é‡ |
| bounds | array | å¦ | null | åœ°ç†è¾¹ç•Œï¼Œæ ¼å¼ï¼š[west, south, east, north] |
| compression | boolean | å¦ | true | æ˜¯å¦å¯ç”¨å‹ç¼© |
| decompress | boolean | å¦ | true | æ˜¯å¦è‡ªåŠ¨è§£å‹è¾“å‡ºæ–‡ä»¶ |
| threads | number | å¦ | 4 | çº¿ç¨‹æ•° |
| maxMemory | string | å¦ | "8g" | æœ€å¤§å†…å­˜é™åˆ¶ï¼Œæ”¯æŒæ ¼å¼ï¼šæ•°å­—+å•ä½ï¼ˆå¦‚"8m"ã€"16g"ã€"1024k"ï¼‰ |
| autoZoom | boolean | å¦ | false | æ˜¯å¦è‡ªåŠ¨è®¡ç®—ç¼©æ”¾çº§åˆ« |
| zoomStrategy | string | å¦ | "conservative" | ç¼©æ”¾ç­–ç•¥ï¼š"conservative"æˆ–"aggressive" |
| mergeTerrains | boolean | å¦ | false | **[NEW]** æ˜¯å¦åœ¨åˆ‡ç‰‡å®Œæˆåè‡ªåŠ¨åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶å¤¹ |

#### ğŸ“ å‚æ•°æ ¼å¼è¯´æ˜
`folderPaths` å’Œ `filePatterns` å‚æ•°æ ¼å¼ä¸ç´¢å¼•ç“¦ç‰‡æ¥å£ç›¸åŒï¼š
- **folderPaths**: ç›¸å¯¹äºæ•°æ®æºç›®å½•çš„è·¯å¾„åˆ—è¡¨
- **filePatterns**: æ”¯æŒé€šé…ç¬¦æ¨¡å¼å’Œtxtæ–‡ä»¶åˆ—è¡¨ï¼Œé»˜è®¤å€¼ä¸º `["*.tif", "*.tiff"]`

è¯¦ç»†æ ¼å¼è¯´æ˜è¯·å‚è€ƒä¸Šæ–‡ç´¢å¼•ç“¦ç‰‡æ¥å£çš„å‚æ•°æ ¼å¼è¯´æ˜ã€‚

#### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1: åŸºæœ¬é€šé…ç¬¦æ¨¡å¼**
```json
{
  "folderPaths": ["data/elevation", "data/dem"],
  "filePatterns": ["*.tif", "elevation_*.tif"],
  "outputPath": ["terrain", "project", "v1"],
  "startZoom": 0,
  "endZoom": 12,
  "maxTriangles": 8388608,
  "bounds": [119.31, 21.75, 124.56, 25.93],
  "compression": true,
  "decompress": true,
  "threads": 6,
  "maxMemory": "16m",
  "autoZoom": false,
  "zoomStrategy": "conservative",
  "mergeTerrains": false
}
```

**ç¤ºä¾‹2: ä½¿ç”¨txtæ–‡ä»¶åˆ—è¡¨**
```json
{
  "folderPaths": ["terrain/high_res", "terrain/backup"],
  "filePatterns": ["priority_dem.txt", "*.tiff"],
  "outputPath": ["terrain", "batch_v2"],
  "startZoom": 2,
  "endZoom": 14,
  "maxTriangles": 12582912,
  "bounds": null,
  "compression": false,
  "decompress": false,
  "threads": 8,
  "maxMemory": "32m",
  "autoZoom": true,
  "zoomStrategy": "aggressive",
  "mergeTerrains": false
}
```

**ç¤ºä¾‹3: åœ°å½¢åˆå¹¶æ¨¡å¼ [NEW]**
```json
{
  "folderPaths": ["region1", "region2", "region3"],
  "filePatterns": ["*.tif"],
  "outputPath": ["terrain", "merged_areas"],
  "startZoom": 0,
  "endZoom": 12,
  "maxTriangles": 32768,
  "compression": true,
  "decompress": true,
  "mergeTerrains": true,
  "threads": 4,
  "maxMemory": "8m"
}
```

#### ğŸ”¥ åœ°å½¢åˆå¹¶åŠŸèƒ½è¯´æ˜

å½“è®¾ç½® `mergeTerrains: true` æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨æ‰€æœ‰åœ°å½¢åˆ‡ç‰‡å®Œæˆåè‡ªåŠ¨æ‰§è¡Œåˆå¹¶æ“ä½œï¼š

1. **ç“¦ç‰‡æ–‡ä»¶åˆå¹¶**: æŒ‰ z/x/y.terrain ç»“æ„åˆå¹¶æ‰€æœ‰åœ°å½¢ç“¦ç‰‡
2. **layer.json æ™ºèƒ½åˆå¹¶**: è‡ªåŠ¨åˆå¹¶æ‰€æœ‰ layer.json æ–‡ä»¶çš„å…ƒæ•°æ®
3. **è¾¹ç•Œè®¡ç®—**: è‡ªåŠ¨è®¡ç®—åˆå¹¶åçš„åœ°ç†è¾¹ç•ŒèŒƒå›´
4. **ç©ºé—´ä¼˜åŒ–**: ä½¿ç”¨ç¡¬é“¾æ¥èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨é™çº§ä¸ºå¤åˆ¶
5. **å†²çªå¤„ç†**: ç›¸åŒåæ ‡çš„ç“¦ç‰‡æ–‡ä»¶è‡ªåŠ¨è·³è¿‡ï¼Œé¿å…é‡å¤
6. **è¿›åº¦ç›‘æ§**: åœ¨ä»»åŠ¡çŠ¶æ€ä¸­æ˜¾ç¤ºåˆå¹¶è¿›åº¦å’Œç»“æœç»Ÿè®¡

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | ä»»åŠ¡å¯åŠ¨æ˜¯å¦æˆåŠŸ |
| taskId | string | ä»»åŠ¡IDï¼Œç”¨äºæŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ |
| message | string | ä»»åŠ¡å¯åŠ¨æ¶ˆæ¯ |
| statusUrl | string | ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢URL |
| parameters | object | ä»»åŠ¡å‚æ•°ä¿¡æ¯ |
| parameters.totalFiles | number | æ€»æ–‡ä»¶æ•°é‡ |
| parameters.outputPath | array | è¾“å‡ºè·¯å¾„æ•°ç»„ |
| parameters.zoomRange | string | ç¼©æ”¾çº§åˆ«èŒƒå›´ |
| parameters.threads | number | çº¿ç¨‹æ•° |
| parameters.maxMemory | string | æœ€å¤§å†…å­˜é™åˆ¶ |
| parameters.type | string | ä»»åŠ¡ç±»å‹ï¼Œå›ºå®šå€¼"terrain" |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "taskId": "terrain1751266765",
  "message": "åœ°å½¢åˆ‡ç‰‡ä»»åŠ¡å·²å¯åŠ¨ï¼Œå°†å¤„ç† 3 ä¸ªæ–‡ä»¶",
  "statusUrl": "/api/tasks/terrain1751266765",
  "parameters": {
    "totalFiles": 3,
    "outputPath": ["terrain", "project", "v1"],
    "zoomRange": "0-12",
    "threads": 6,
    "maxMemory": "16m",
    "type": "terrain"
  }
}
```

### åˆ›å»ºç´¢å¼•ç“¦ç‰‡

**POST** `/api/tile/indexedTiles`

åŸºäºç©ºé—´ç´¢å¼•çš„é«˜æ€§èƒ½ç“¦ç‰‡ç”Ÿæˆï¼Œæ”¯æŒå¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **æ–‡ä»¶æ¨¡å¼è§£æ**: è§£æfolderPathså’ŒfilePatternså‚æ•°
2. **æ–‡ä»¶åŒ¹é…**: æ ¹æ®é€šé…ç¬¦æ¨¡å¼æˆ–txtæ–‡ä»¶åˆ—è¡¨åŒ¹é…TIFæ–‡ä»¶
3. **å¢é‡æ›´æ–°æ£€æŸ¥**: å¦‚æœå¯ç”¨å¢é‡æ›´æ–°ï¼Œæ£€æŸ¥ç°æœ‰ç“¦ç‰‡æ˜¯å¦å¯å¤ç”¨
4. **ç©ºé—´ç´¢å¼•æ„å»º**: ç”ŸæˆSHPåˆ†å¹…çŸ¢é‡ç´¢å¼•æ–‡ä»¶
5. **ç“¦ç‰‡ç½‘æ ¼è®¡ç®—**: è®¡ç®—æŒ‡å®šç¼©æ”¾çº§åˆ«çš„ç“¦ç‰‡ç½‘æ ¼
6. **ç©ºé—´å…³ç³»åˆ†æ**: åˆ†ææ¯ä¸ªç“¦ç‰‡ä¸TIFæ–‡ä»¶çš„ç©ºé—´å…³ç³»
7. **å…ƒæ•°æ®è®°å½•**: è®°å½•ç“¦ç‰‡çš„ä½ç½®ã€å…³è”æ–‡ä»¶ã€åƒç´ ç»Ÿè®¡ç­‰ä¿¡æ¯
8. **å¤šè¿›ç¨‹åˆ‡ç‰‡**: ä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œç²¾ç¡®åˆ‡å‰²æ¯ä¸ªç“¦ç‰‡
9. **è´¨é‡æ§åˆ¶**: æ£€æµ‹å’Œå¤„ç†é€æ˜ç“¦ç‰‡ã€nodataå€¼ç­‰
10. **é€æ˜ç“¦ç‰‡å¤„ç†**: æ ¹æ®skipNodataTileså‚æ•°å†³å®šæ˜¯å¦è·³è¿‡é€æ˜ç“¦ç‰‡
11. **æ¸…ç†æ“ä½œ**: è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç´¢å¼•æ–‡ä»¶

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| folderPaths | array | æ˜¯ | - | æœç´¢æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨ï¼ˆç›¸å¯¹äºæ•°æ®æºç›®å½•ï¼‰ |
| filePatterns | array | å¦ | ["*.tif", "*.tiff"] | æ–‡ä»¶åŒ¹é…æ¨¡å¼åˆ—è¡¨ï¼Œæ”¯æŒé€šé…ç¬¦å’Œtxtæ–‡ä»¶åˆ—è¡¨ |
| outputPath | array | æ˜¯ | - | è¾“å‡ºè·¯å¾„æ•°ç»„ |
| minZoom | number | å¦ | 0 | æœ€å°ç¼©æ”¾çº§åˆ« |
| maxZoom | number | å¦ | 12 | æœ€å¤§ç¼©æ”¾çº§åˆ« |
| processes | number | å¦ | 4 | è¿›ç¨‹æ•° |
| maxMemory | string | å¦ | "8g" | æœ€å¤§å†…å­˜é™åˆ¶ï¼Œæ”¯æŒæ ¼å¼ï¼šæ•°å­—+å•ä½ï¼ˆå¦‚"8g"ã€"512m"ã€"1024k"ï¼‰ |
| tileSize | number | å¦ | 256 | ç“¦ç‰‡å¤§å° |
| generateShpIndex | boolean | å¦ | true | æ˜¯å¦ç”ŸæˆSHPç´¢å¼• |
| resampling | string | å¦ | "near" | é‡é‡‡æ ·æ–¹æ³•ï¼šnearã€bilinearã€cubicã€cubicsplineã€lanczosã€averageã€mode |
| enableIncrementalUpdate | boolean | å¦ | false | æ˜¯å¦å¯ç”¨å¢é‡æ›´æ–°ï¼ˆå¤ç”¨ç°æœ‰ç“¦ç‰‡ï¼‰ |
| skipNodataTiles | boolean | å¦ | false | æ˜¯å¦è·³è¿‡é€æ˜ç“¦ç‰‡çš„ç”Ÿæˆ |

#### ğŸ“ `folderPaths` å‚æ•°æ ¼å¼è¯´æ˜
- **è·¯å¾„æ ¼å¼**: ç›¸å¯¹äºæ•°æ®æºç›®å½•çš„è·¯å¾„
- **å¤šçº§ç›®å½•**: æ”¯æŒå¤šçº§ç›®å½•ï¼Œå¦‚ `["data/images", "data/elevation"]`
- **æ ¹ç›®å½•**: ä½¿ç”¨ç©ºå­—ç¬¦ä¸²æˆ–ç©ºæ•°ç»„è¡¨ç¤ºæ ¹ç›®å½•ï¼š`[""]` æˆ– `[]`
- **ç¤ºä¾‹**:
  ```json
  // æœç´¢å¤šä¸ªæ–‡ä»¶å¤¹
  "folderPaths": ["data/images", "data/elevation", "backup/files"]
  
  // æœç´¢æ ¹ç›®å½•
  "folderPaths": [""]
  
  // æœç´¢å­ç›®å½•
  "folderPaths": ["project/dem", "project/ortho"]
  ```

#### ğŸ“‹ `filePatterns` å‚æ•°æ ¼å¼è¯´æ˜
æ”¯æŒä¸¤ç§æ ¼å¼ï¼š**é€šé…ç¬¦æ¨¡å¼** å’Œ **txtæ–‡ä»¶åˆ—è¡¨**

**1. é€šé…ç¬¦æ¨¡å¼ï¼ˆæ¨èï¼‰**
- **åŸºæœ¬é€šé…ç¬¦**: `*`ï¼ˆä»»æ„å­—ç¬¦ï¼‰ã€`?`ï¼ˆå•ä¸ªå­—ç¬¦ï¼‰
- **æ”¯æŒæ‰©å±•å**: `.tif`ã€`.tiff`
- **ç¤ºä¾‹**:
  ```json
  // åŸºæœ¬é€šé…ç¬¦
  "filePatterns": ["*.tif", "*.tiff"]
  
  // å‰ç¼€åŒ¹é…
  "filePatterns": ["elevation_*.tif", "dem_*.tiff"]
  
  // å¤æ‚åŒ¹é…
  "filePatterns": ["*_dem.tif", "ortho_2024_*.tif"]
  ```

**2. txtæ–‡ä»¶åˆ—è¡¨**
- **æ–‡ä»¶æ ¼å¼**: ä»¥ `.txt` ç»“å°¾çš„æ–‡ä»¶å
- **æ–‡ä»¶ä½ç½®**: ä½äºæ•°æ®æºç›®å½•ä¸‹
- **æ–‡ä»¶å†…å®¹**: æ¯è¡Œä¸€ä¸ªæ–‡ä»¶åï¼Œæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„
- **æ³¨é‡Šæ”¯æŒ**: ä»¥ `#` å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šï¼Œç©ºè¡Œä¼šè¢«å¿½ç•¥
- **ç¤ºä¾‹**:
  ```json
  // ä½¿ç”¨txtæ–‡ä»¶åˆ—è¡¨
  "filePatterns": ["file_list.txt", "priority_files.txt"]
  ```
  
  **file_list.txt æ–‡ä»¶å†…å®¹ç¤ºä¾‹**:
  ```
  # è¿™æ˜¯æ³¨é‡Šè¡Œ
  taiwan.tif
  elevation/dem_01.tif
  data/ortho/image_2024.tiff
  /absolute/path/to/file.tif
  
  # å¦ä¸€ä¸ªæ–‡ä»¶
  backup/archive.tif
  ```

**3. æ··åˆä½¿ç”¨**
```json
// åŒæ—¶ä½¿ç”¨é€šé…ç¬¦å’Œtxtæ–‡ä»¶
"filePatterns": ["*.tif", "priority_files.txt", "backup_*.tiff"]
```

#### ğŸ¯ `resampling` é‡é‡‡æ ·æ–¹æ³•è¯´æ˜
æ”¯æŒä»¥ä¸‹GDALé‡é‡‡æ ·æ–¹æ³•ï¼š
- **near**: æœ€è¿‘é‚»æ’å€¼ï¼ˆé»˜è®¤ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œé€‚ç”¨äºåˆ†ç±»æ•°æ®ï¼‰
- **bilinear**: åŒçº¿æ€§æ’å€¼ï¼ˆå¹³æ»‘æ•ˆæœï¼Œé€‚ç”¨äºè¿ç»­æ•°æ®ï¼‰
- **cubic**: ä¸‰æ¬¡å·ç§¯æ’å€¼ï¼ˆè´¨é‡æ›´é«˜ï¼Œå¤„ç†é€Ÿåº¦è¾ƒæ…¢ï¼‰
- **cubicspline**: ä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼ˆé«˜è´¨é‡ï¼Œè¾¹ç¼˜æ¸…æ™°ï¼‰
- **lanczos**: Lanczosæ’å€¼ï¼ˆé«˜è´¨é‡ï¼Œé€‚ç”¨äºç¼©æ”¾ï¼‰
- **average**: å¹³å‡å€¼ï¼ˆé€‚ç”¨äºé™é‡‡æ ·ï¼‰
- **mode**: ä¼—æ•°ï¼ˆé€‚ç”¨äºåˆ†ç±»æ•°æ®çš„é™é‡‡æ ·ï¼‰

#### ğŸ’¾ `maxMemory` å†…å­˜å‚æ•°æ ¼å¼è¯´æ˜
æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š
- **æ ¼å¼**: æ•°å­— + å•ä½åç¼€
- **æ”¯æŒå•ä½**: 
  - `k` æˆ– `K`: åƒå­—èŠ‚ï¼ˆKBï¼‰
  - `m` æˆ– `M`: å…†å­—èŠ‚ï¼ˆMBï¼‰
  - `g` æˆ– `G`: å‰å­—èŠ‚ï¼ˆGBï¼‰
- **ç¤ºä¾‹**: 
  - `"512m"`: 512MB
  - `"8g"`: 8GB
  - `"1024k"`: 1024KB

#### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1: åŸºæœ¬é€šé…ç¬¦æ¨¡å¼**
```json
{
  "folderPaths": ["data/images", "data/elevation"],
  "filePatterns": ["*.tif", "elevation_*.tif"],
  "outputPath": ["indexed", "project_v1"],
  "minZoom": 0,
  "maxZoom": 14,
  "processes": 8,
  "maxMemory": "16g",
  "tileSize": 256,
  "generateShpIndex": true,
  "resampling": "bilinear",
  "enableIncrementalUpdate": false,
  "skipNodataTiles": true
}
```

**ç¤ºä¾‹2: ä½¿ç”¨txtæ–‡ä»¶åˆ—è¡¨**
```json
{
  "folderPaths": ["project/dem", "project/ortho"],
  "filePatterns": ["high_priority.txt", "*.tiff"],
  "outputPath": ["indexed", "batch_processing"],
  "minZoom": 2,
  "maxZoom": 16,
  "processes": 12,
  "maxMemory": "32g",
  "tileSize": 512,
  "generateShpIndex": true,
  "resampling": "cubic",
  "enableIncrementalUpdate": true,
  "skipNodataTiles": false
}
```

**ç¤ºä¾‹3: æœç´¢æ ¹ç›®å½•**
```json
{
  "folderPaths": [""],
  "filePatterns": ["taiwan_*.tif", "dem_2024_*.tiff"],
  "outputPath": ["root_tiles"],
  "minZoom": 0,
  "maxZoom": 12,
  "processes": 4,
  "maxMemory": "8g",
  "tileSize": 256,
  "generateShpIndex": false,
  "resampling": "near",
  "enableIncrementalUpdate": false,
  "skipNodataTiles": true
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| taskId | string | ä»»åŠ¡ID |
| message | string | ä»»åŠ¡å¯åŠ¨æ¶ˆæ¯ |
| statusUrl | string | ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢URL |
| method | string | å¤„ç†æ–¹æ³•ï¼Œå›ºå®šå€¼"ç“¦ç‰‡ç´¢å¼•ç²¾ç¡®åˆ‡ç‰‡" |
| indexInfo | object | ç´¢å¼•ä¿¡æ¯ |
| indexInfo.totalFiles | number | æ€»æ–‡ä»¶æ•°é‡ |
| indexInfo.zoomLevels | string | ç¼©æ”¾çº§åˆ«èŒƒå›´ |
| indexInfo.tileSize | number | ç“¦ç‰‡å¤§å° |
| indexInfo.generateShpIndex | boolean | æ˜¯å¦ç”ŸæˆSHPç´¢å¼• |
| indexInfo.enableIncrementalUpdate | boolean | æ˜¯å¦å¯ç”¨å¢é‡æ›´æ–° |
| indexInfo.skipNodataTiles | boolean | æ˜¯å¦è·³è¿‡é€æ˜ç“¦ç‰‡ |
| processingInfo | object | å¤„ç†é…ç½®ä¿¡æ¯ |
| processingInfo.processes | number | è¿›ç¨‹æ•° |
| processingInfo.maxMemory | string | æœ€å¤§å†…å­˜é™åˆ¶ |
| processingInfo.resampling | string | é‡é‡‡æ ·æ–¹æ³• |
| processingInfo.outputPathArray | array | è¾“å‡ºè·¯å¾„æ•°ç»„ |

#### å“åº”ç¤ºä¾‹
```json
{
  "taskId": "indexedTiles1751266792",
  "message": "ç“¦ç‰‡ç´¢å¼•åˆ‡ç‰‡ä»»åŠ¡å·²å¯åŠ¨ï¼Œå°†å¤„ç† 3 ä¸ªæ–‡ä»¶",
  "statusUrl": "/api/tasks/indexedTiles1751266792",
  "method": "ç“¦ç‰‡ç´¢å¼•ç²¾ç¡®åˆ‡ç‰‡",
  "indexInfo": {
    "totalFiles": 3,
    "zoomLevels": "0-14",
    "tileSize": 256,
    "generateShpIndex": true,
    "enableIncrementalUpdate": false,
    "skipNodataTiles": true
  },
  "processingInfo": {
    "processes": 8,
    "maxMemory": "16g",
    "resampling": "bilinear",
    "outputPathArray": ["indexed", "project_v1"]
  }
}
```

### ç“¦ç‰‡æ ¼å¼è½¬æ¢

**POST** `/api/tile/convert`

æ”¯æŒç“¦ç‰‡æ ¼å¼è½¬æ¢ï¼šz/x_y.pngï¼ˆæ‰å¹³æ ¼å¼ï¼‰â†” z/x/y.pngï¼ˆåµŒå¥—æ ¼å¼ï¼‰

#### ğŸ“ æ¥å£é€»è¾‘
1. **æ ¼å¼è‡ªåŠ¨è¯†åˆ«**: æ‰«æç›®å½•ç»“æ„ï¼Œè‡ªåŠ¨è¯†åˆ«å½“å‰ç“¦ç‰‡æ ¼å¼
2. **ç›®å½•ç»“æ„åˆ†æ**: åˆ†ææ‰€æœ‰çº§åˆ«çš„ç›®å½•å’Œæ–‡ä»¶åˆ†å¸ƒ
3. **è½¬æ¢ç­–ç•¥åˆ¶å®š**: æ ¹æ®æºæ ¼å¼å’Œç›®æ ‡æ ¼å¼åˆ¶å®šè½¬æ¢ç­–ç•¥
4. **å¹¶è¡Œå¤„ç†**: ä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†ç“¦ç‰‡æ–‡ä»¶è½¬æ¢
5. **ç›®å½•é‡å»º**: åˆ›å»ºæ–°æ ¼å¼çš„ç›®å½•ç»“æ„
6. **æ–‡ä»¶ç§»åŠ¨/å¤åˆ¶**: æ ¹æ®keepOriginalå‚æ•°å¤„ç†åŸæ–‡ä»¶
7. **å®Œæ•´æ€§éªŒè¯**: éªŒè¯è½¬æ¢åçš„æ–‡ä»¶å®Œæ•´æ€§
8. **æ¸…ç†æ“ä½œ**: æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç©ºç›®å½•

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| sourcePath | string | æ˜¯ | - | æºç“¦ç‰‡ç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºtilesç›®å½•ï¼‰ |
| targetPath | string | æ˜¯ | - | ç›®æ ‡ç“¦ç‰‡ç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºtilesç›®å½•ï¼‰ |
| sourceFormat | string | æ˜¯ | - | æºæ ¼å¼ï¼š"flat"ï¼ˆz/x_y.pngï¼‰æˆ–"nested"ï¼ˆz/x/y.pngï¼‰ |
| targetFormat | string | æ˜¯ | - | ç›®æ ‡æ ¼å¼ï¼š"flat"ï¼ˆz/x_y.pngï¼‰æˆ–"nested"ï¼ˆz/x/y.pngï¼‰ |
| overwrite | boolean | å¦ | false | æ˜¯å¦è¦†ç›–å·²å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "sourcePath": "maps/project_v1",
  "targetPath": "maps/project_v1_flat",
  "sourceFormat": "nested",
  "targetFormat": "flat",
  "overwrite": false
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| taskId | string | ä»»åŠ¡ID |
| message | string | ä»»åŠ¡å¯åŠ¨æ¶ˆæ¯ |
| statusUrl | string | ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢URL |
| conversionInfo | object | è½¬æ¢ä¿¡æ¯ |
| conversionInfo.sourceFormat | string | æºæ ¼å¼ |
| conversionInfo.targetFormat | string | ç›®æ ‡æ ¼å¼ |
| conversionInfo.totalFiles | number | æ€»æ–‡ä»¶æ•°é‡ |

#### å“åº”ç¤ºä¾‹
```json
{
  "taskId": "convert_1751266800",
  "message": "ç“¦ç‰‡æ ¼å¼è½¬æ¢ä»»åŠ¡å·²å¯åŠ¨",
  "statusUrl": "/api/tasks/convert_1751266800",
  "conversionInfo": {
    "sourceFormat": "nested",
    "targetFormat": "flat",
    "totalFiles": 1024
  }
}
```

## ğŸ”§ åˆ†æå·¥å…·

### ç¼©æ”¾çº§åˆ«æ¨è

**POST** `/api/analyze/zoomLevels`

æ ¹æ®TIFæ–‡ä»¶åˆ†è¾¨ç‡åˆ†æï¼Œæ¨èæœ€ä½³ç¼©æ”¾çº§åˆ«èŒƒå›´ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **æ–‡ä»¶éªŒè¯**: æ£€æŸ¥TIFæ–‡ä»¶æ˜¯å¦å­˜åœ¨å’Œå¯è®¿é—®
2. **åˆ†è¾¨ç‡è§£æ**: ä½¿ç”¨GDALè§£ææ–‡ä»¶çš„åƒç´ åˆ†è¾¨ç‡
3. **åœ°ç†èŒƒå›´è®¡ç®—**: è®¡ç®—æ–‡ä»¶çš„åœ°ç†è¦†ç›–èŒƒå›´
4. **Webå¢¨å¡æ‰˜è½¬æ¢**: å°†åœ°ç†åæ ‡è½¬æ¢ä¸ºWebå¢¨å¡æ‰˜æŠ•å½±
5. **çº§åˆ«ç®—æ³•**: æ ¹æ®åˆ†è¾¨ç‡å’Œè¦†ç›–èŒƒå›´è®¡ç®—æœ€ä½³çº§åˆ«
6. **ç­–ç•¥åº”ç”¨**: åº”ç”¨ä¿å®ˆæˆ–æ¿€è¿›çš„æ¨èç­–ç•¥
7. **è´¨é‡è¯„ä¼°**: è¯„ä¼°ä¸åŒçº§åˆ«çš„ç“¦ç‰‡è´¨é‡
8. **å»ºè®®ç”Ÿæˆ**: ç”Ÿæˆè¯¦ç»†çš„çº§åˆ«æ¨èå’Œä½¿ç”¨å»ºè®®

#### è¯·æ±‚å‚æ•°
æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š**å•æ–‡ä»¶æ¨¡å¼**å’Œ**æ‰¹é‡æ¨¡å¼**

**å•æ–‡ä»¶æ¨¡å¼ï¼ˆæ¨èï¼‰**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| sourceFile | string | æ˜¯ | - | æºæ–‡ä»¶åï¼ˆç›¸å¯¹äºæ•°æ®æºç›®å½•ï¼‰ |

**æ‰¹é‡æ¨¡å¼**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| folderPaths | array | æ˜¯ | - | æœç´¢æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨ï¼ˆç›¸å¯¹äºæ•°æ®æºç›®å½•ï¼‰ |
| filePatterns | array | å¦ | ["*.tif", "*.tiff"] | æ–‡ä»¶åŒ¹é…æ¨¡å¼åˆ—è¡¨ï¼Œæ”¯æŒé€šé…ç¬¦å’Œtxtæ–‡ä»¶åˆ—è¡¨ |

#### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1: å•æ–‡ä»¶æ¨¡å¼**
```json
{
  "sourceFile": "taiwan.tif"
}
```

**ç¤ºä¾‹2: æ‰¹é‡æ¨¡å¼ï¼ˆåˆ†æç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼‰**
```json
{
  "folderPaths": ["data/elevation"],
  "filePatterns": ["*.tif", "dem_*.tiff"]
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| recommendedZoom | object | æ¨èçº§åˆ« |
| recommendedZoom.minZoom | number | æ¨èæœ€å°çº§åˆ« |
| recommendedZoom.maxZoom | number | æ¨èæœ€å¤§çº§åˆ« |
| recommendedZoom.strategy | string | ä½¿ç”¨çš„ç­–ç•¥ |
| analysis | object | åˆ†æç»“æœ |
| analysis.resolution | number | åƒç´ åˆ†è¾¨ç‡ |
| analysis.fileSize | number | æ–‡ä»¶å¤§å° |
| analysis.dimensions | object | å›¾åƒå°ºå¯¸ |

#### å“åº”ç¤ºä¾‹
```json
{
  "recommendedZoom": {
    "minZoom": 5,
    "maxZoom": 15,
    "strategy": "conservative"
  },
  "analysis": {
    "resolution": 0.0001,
    "fileSize": 1139867648,
    "dimensions": {
      "width": 18892,
      "height": 15028
    }
  }
}
```

## ğŸ“ˆ ä»»åŠ¡ç®¡ç†

### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

**GET** `/api/tasks/<taskId>`

æŸ¥è¯¢æŒ‡å®šä»»åŠ¡çš„è¯¦ç»†çŠ¶æ€ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ä»»åŠ¡æŸ¥æ‰¾**: æ ¹æ®taskIdåœ¨å…¨å±€ä»»åŠ¡æ± ä¸­æŸ¥æ‰¾ä»»åŠ¡è®°å½•
2. **çŠ¶æ€å®æ—¶æ›´æ–°**: æ£€æŸ¥ä»»åŠ¡è¿›ç¨‹çŠ¶æ€ï¼Œæ›´æ–°ä»»åŠ¡ä¿¡æ¯
3. **è¿›åº¦è®¡ç®—**: è§£ææ—¥å¿—æ–‡ä»¶ï¼Œè®¡ç®—ç“¦ç‰‡ç”Ÿæˆè¿›åº¦
4. **é€Ÿåº¦ç»Ÿè®¡**: è®¡ç®—ç“¦ç‰‡ç”Ÿæˆé€Ÿåº¦ï¼ˆç“¦ç‰‡/ç§’ï¼‰
5. **æ—¶é—´é¢„ä¼°**: æ ¹æ®å½“å‰é€Ÿåº¦é¢„ä¼°å‰©ä½™å¤„ç†æ—¶é—´
6. **é”™è¯¯æ£€æµ‹**: æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å‡ºç°é”™è¯¯æˆ–å¼‚å¸¸
7. **ç»“æœå¤„ç†**: å¦‚æœä»»åŠ¡å®Œæˆï¼Œå¤„ç†æœ€ç»ˆç»“æœ
8. **JSONå°è£…**: è¿”å›å®Œæ•´çš„ä»»åŠ¡çŠ¶æ€ä¿¡æ¯

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| taskId | string | æ˜¯ | ä»»åŠ¡ID |

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| status | string | ä»»åŠ¡çŠ¶æ€ï¼š"running"/"completed"/"failed"/"stopped" |
| progress | number | è¿›åº¦ç™¾åˆ†æ¯” (0-100) |
| message | string | ä»»åŠ¡çŠ¶æ€æ¶ˆæ¯ |
| startTime | string | ä»»åŠ¡å¼€å§‹æ—¶é—´ |
| endTime | string | ä»»åŠ¡ç»“æŸæ—¶é—´ï¼ˆå¦‚æœå·²å®Œæˆï¼‰ |
| currentStage | string | å½“å‰æ‰€å¤„çš„é˜¶æ®µï¼ˆå¦‚"åˆå§‹åŒ–"/"æ–‡ä»¶å¤„ç†"/"ä»»åŠ¡å®Œæˆ"ï¼‰ |
| processLog | array | è¿‡ç¨‹è®°å½•åˆ—è¡¨ï¼Œè¯¦ç»†è®°å½•ä»»åŠ¡å„ä¸ªé˜¶æ®µçš„æ‰§è¡Œæƒ…å†µ |
| processLog[].stage | string | é˜¶æ®µåç§° |
| processLog[].status | string | é˜¶æ®µçŠ¶æ€ï¼š"completed"/"failed"/"running" |
| processLog[].message | string | é˜¶æ®µæè¿°ä¿¡æ¯ |
| processLog[].timestamp | string | é˜¶æ®µå®Œæˆæ—¶é—´(ISOæ ¼å¼) |
| processLog[].progress | number | é˜¶æ®µå®Œæˆæ—¶çš„è¿›åº¦ç™¾åˆ†æ¯” |
| processLog[].fileInfo | object | æ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰ |
| progressDetails | object | è¯¦ç»†è¿›åº¦ä¿¡æ¯ |
| progressDetails.currentTiles | number | å½“å‰å·²ç”Ÿæˆç“¦ç‰‡æ•° |
| progressDetails.estimatedTotal | number | é¢„è®¡æ€»ç“¦ç‰‡æ•° |
| progressDetails.tilesPerSecond | number | ç“¦ç‰‡ç”Ÿæˆé€Ÿåº¦ |
| progressDetails.elapsedTime | number | å·²ç”¨æ—¶é—´ï¼ˆç§’ï¼‰ |
| progressDetails.estimatedRemainingTime | number | é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰ |

#### å“åº”ç¤ºä¾‹
```json
{
  "status": "running",
  "progress": 45,
  "message": "æ­£åœ¨å¤„ç†æ–‡ä»¶ 2/3: terrain_data.tif",
  "startTime": "2024-06-30 16:45:00",
  "currentStage": "æ–‡ä»¶å¤„ç†",
  "processLog": [
    {
      "stage": "åˆå§‹åŒ–",
      "status": "completed",
      "message": "ä»»åŠ¡åˆå§‹åŒ–å®Œæˆï¼Œå‡†å¤‡å¤„ç†3ä¸ªæ–‡ä»¶",
      "timestamp": "2024-06-30T16:45:00.123Z",
      "progress": 0
    },
    {
      "stage": "æ–‡ä»¶å¤„ç†",
      "status": "completed",
      "message": "æ–‡ä»¶ terrain_base.tif å¤„ç†æˆåŠŸï¼Œç”Ÿæˆäº† 256 ä¸ªåœ°å½¢æ–‡ä»¶",
      "timestamp": "2024-06-30T16:45:15.456Z",
      "progress": 33,
      "fileInfo": {
        "filename": "terrain_base.tif",
        "outputPath": "terrain/project/v1/base",
        "terrainFiles": 256
      }
    },
    {
      "stage": "æ–‡ä»¶å¤„ç†",
      "status": "running",
      "message": "æ­£åœ¨å¤„ç†æ–‡ä»¶ terrain_data.tif",
      "timestamp": "2024-06-30T16:45:16.789Z",
      "progress": 45
    }
  ],
  "progressDetails": {
    "currentTiles": 630,
    "estimatedTotal": 1398,
    "tilesPerSecond": 52.5,
    "elapsedTime": 12,
    "estimatedRemainingTime": 15
  }
}
```

### æŸ¥è¯¢æ‰€æœ‰ä»»åŠ¡

**GET** `/api/tasks`

è·å–æ‰€æœ‰ä»»åŠ¡çš„çŠ¶æ€åˆ—è¡¨ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ä»»åŠ¡æ± éå†**: éå†å…¨å±€ä»»åŠ¡æ± ä¸­çš„æ‰€æœ‰ä»»åŠ¡è®°å½•
2. **çŠ¶æ€æ±‡æ€»**: æ”¶é›†æ¯ä¸ªä»»åŠ¡çš„åŸºæœ¬çŠ¶æ€ä¿¡æ¯
3. **å®æ—¶æ›´æ–°**: æ›´æ–°æ‰€æœ‰ä»»åŠ¡çš„æœ€æ–°çŠ¶æ€
4. **æ’åºå¤„ç†**: æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ä»»åŠ¡
5. **åˆ†é¡µæ”¯æŒ**: æ”¯æŒåˆ†é¡µè¿”å›å¤§é‡ä»»åŠ¡æ•°æ®
6. **ç»Ÿè®¡è®¡ç®—**: è®¡ç®—å„ç§çŠ¶æ€ä»»åŠ¡çš„æ•°é‡ç»Ÿè®¡
7. **è¿‡æ»¤åŠŸèƒ½**: æ”¯æŒæŒ‰çŠ¶æ€ã€ç±»å‹ç­‰è¿‡æ»¤ä»»åŠ¡
8. **JSONå°è£…**: è¿”å›ä»»åŠ¡åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| tasks | array | ä»»åŠ¡åˆ—è¡¨ |
| tasks[].taskId | string | ä»»åŠ¡ID |
| tasks[].status | string | ä»»åŠ¡çŠ¶æ€ |
| tasks[].progress | number | è¿›åº¦ç™¾åˆ†æ¯” |
| tasks[].message | string | çŠ¶æ€æ¶ˆæ¯ |
| tasks[].startTime | string | å¼€å§‹æ—¶é—´ |
| tasks[].endTime | string | ç»“æŸæ—¶é—´ï¼ˆå¦‚æœå·²å®Œæˆï¼‰ |
| count | number | ä»»åŠ¡æ€»æ•° |

#### å“åº”ç¤ºä¾‹
```json
{
  "tasks": [
    {
      "taskId": "terrain_1751266765",
      "status": "completed",
      "progress": 100,
      "message": "åœ°å½¢ç“¦ç‰‡åˆ›å»ºå®Œæˆ",
      "startTime": "2024-06-30 16:45:00",
      "endTime": "2024-06-30 16:48:30"
    },
    {
      "taskId": "indexedTiles_1751266792",
      "status": "running",
      "progress": 32,
      "message": "æ­£åœ¨åˆ›å»ºç´¢å¼•ç“¦ç‰‡...",
      "startTime": "2024-06-30 16:50:00"
    }
  ],
  "count": 2
}
```

### åœæ­¢ä»»åŠ¡

**POST** `/api/tasks/<taskId>/stop`

åœæ­¢æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ä»»åŠ¡éªŒè¯**: éªŒè¯ä»»åŠ¡IDæ˜¯å¦å­˜åœ¨ä¸”å¤„äºå¯åœæ­¢çŠ¶æ€
2. **è¿›ç¨‹æŸ¥æ‰¾**: æŸ¥æ‰¾ä»»åŠ¡å¯¹åº”çš„ç³»ç»Ÿè¿›ç¨‹ID
3. **ä¼˜é›…åœæ­¢**: å‘é€SIGTERMä¿¡å·è¯·æ±‚è¿›ç¨‹ä¼˜é›…ç»ˆæ­¢
4. **ç­‰å¾…ç¡®è®¤**: ç­‰å¾…è¿›ç¨‹å“åº”åœæ­¢ä¿¡å·
5. **å¼ºåˆ¶ç»ˆæ­¢**: å¦‚æœä¼˜é›…åœæ­¢å¤±è´¥ï¼Œå‘é€SIGKILLä¿¡å·
6. **çŠ¶æ€æ›´æ–°**: æ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸º"stopped"
7. **æ¸…ç†æ“ä½œ**: æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œèµ„æº
8. **ç»“æœè¿”å›**: è¿”å›åœæ­¢æ“ä½œçš„ç»“æœ

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| taskId | string | æ˜¯ | è¦åœæ­¢çš„ä»»åŠ¡ID |

#### è¯·æ±‚ç¤ºä¾‹
```json
{}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| taskId | string | ä»»åŠ¡ID |
| status | string | ä»»åŠ¡çŠ¶æ€ï¼Œå›ºå®šå€¼"stopped" |
| stoppedAt | string | åœæ­¢æ—¶é—´ |

#### å“åº”ç¤ºä¾‹
```json
{
  "message": "ä»»åŠ¡å·²åœæ­¢",
  "taskId": "terrain_1751266765",
  "status": "stopped",
  "stoppedAt": "2025-01-08 16:45:00"
}
```

### åˆ é™¤ä»»åŠ¡

**DELETE** `/api/tasks/<taskId>`

åˆ é™¤æŒ‡å®šçš„ä»»åŠ¡è®°å½•ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ä»»åŠ¡éªŒè¯**: éªŒè¯ä»»åŠ¡IDæ˜¯å¦å­˜åœ¨
2. **çŠ¶æ€æ£€æŸ¥**: ç¡®ä¿ä»»åŠ¡ä¸åœ¨è¿è¡ŒçŠ¶æ€
3. **æƒé™æ£€æŸ¥**: éªŒè¯æ˜¯å¦æœ‰åˆ é™¤æƒé™
4. **æ•°æ®æ¸…ç†**: åˆ é™¤ä»»åŠ¡è®°å½•å’Œç›¸å…³æ•°æ®
5. **æ–‡ä»¶æ¸…ç†**: æ¸…ç†ä»»åŠ¡ç›¸å…³çš„ä¸´æ—¶æ–‡ä»¶
6. **å¼•ç”¨æ¸…ç†**: ä»ä»»åŠ¡æ± ä¸­ç§»é™¤ä»»åŠ¡å¼•ç”¨
7. **æ—¥å¿—å¤„ç†**: å¤„ç†ä»»åŠ¡æ—¥å¿—æ–‡ä»¶
8. **ç»“æœè¿”å›**: è¿”å›åˆ é™¤ç¡®è®¤ä¿¡æ¯

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| taskId | string | æ˜¯ | è¦åˆ é™¤çš„ä»»åŠ¡ID |

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| taskId | string | ä»»åŠ¡ID |
| deletedTask | object | è¢«åˆ é™¤çš„ä»»åŠ¡ä¿¡æ¯ |

#### å“åº”ç¤ºä¾‹
```json
{
  "message": "ä»»åŠ¡åˆ é™¤æˆåŠŸ",
  "taskId": "terrain_1751266765",
  "deletedTask": {
    "status": "completed",
    "progress": 100,
    "message": "åœ°å½¢ç“¦ç‰‡åˆ›å»ºå®Œæˆ",
    "startTime": "2024-06-30 16:45:00",
    "endTime": "2024-06-30 16:48:30"
  }
}
```

### ä»»åŠ¡æ¸…ç†

**POST** `/api/tasks/cleanup`

æ‰¹é‡æ¸…ç†ä»»åŠ¡è®°å½•ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ç­–ç•¥è§£æ**: è§£ææ¸…ç†ç­–ç•¥å’Œå‚æ•°
2. **ä»»åŠ¡ç­›é€‰**: æ ¹æ®ç­–ç•¥ç­›é€‰è¦æ¸…ç†çš„ä»»åŠ¡
3. **å®‰å…¨æ£€æŸ¥**: ç¡®ä¿ä¸åˆ é™¤æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡
4. **æ‰¹é‡åˆ é™¤**: æ‰¹é‡åˆ é™¤ç¬¦åˆæ¡ä»¶çš„ä»»åŠ¡è®°å½•
5. **æ–‡ä»¶æ¸…ç†**: æ¸…ç†ç›¸å…³çš„ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—
6. **ç»Ÿè®¡è®¡ç®—**: è®¡ç®—æ¸…ç†æ•°é‡å’Œå‰©ä½™ä»»åŠ¡æ•°
7. **æ›´æ–°ç´¢å¼•**: æ›´æ–°ä»»åŠ¡ç´¢å¼•å’Œç¼“å­˜
8. **ç»“æœæŠ¥å‘Š**: ç”Ÿæˆæ¸…ç†æ“ä½œæŠ¥å‘Š

#### è¯·æ±‚å‚æ•°
æ­¤æ¥å£ä¸éœ€è¦ä»»ä½•å‚æ•°ã€‚å›ºå®šæŒ‰æ•°é‡æ¸…ç†ï¼Œä¿ç•™æœ€æ–°çš„100ä¸ªä»»åŠ¡ã€‚

#### è¯·æ±‚ç¤ºä¾‹
```json
{}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| remainingTasks | number | å‰©ä½™ä»»åŠ¡æ•°é‡ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "ä»»åŠ¡æ¸…ç†å®Œæˆ",
  "remainingTasks": 85
}
```

## ğŸ”§ é…ç½®ç®¡ç†

### æ™ºèƒ½é…ç½®æ¨è

**POST** `/api/config/recommend`

æ ¹æ®æ–‡ä»¶ç‰¹å¾å’Œç³»ç»Ÿèµ„æºæ¨èæœ€ä¼˜åˆ‡ç‰‡é…ç½®ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **æ–‡ä»¶åˆ†æ**: åˆ†æTIFæ–‡ä»¶çš„å¤§å°ã€åˆ†è¾¨ç‡ã€åœ°ç†èŒƒå›´
2. **ç³»ç»Ÿè¯„ä¼°**: è¯„ä¼°å½“å‰ç³»ç»Ÿçš„CPUã€å†…å­˜ã€ç£ç›˜èµ„æº
3. **è´Ÿè½½è¯„ä¼°**: è¯„ä¼°ç³»ç»Ÿå½“å‰è´Ÿè½½å’Œå¯ç”¨èµ„æº
4. **ç­–ç•¥åŒ¹é…**: æ ¹æ®æ–‡ä»¶ç‰¹å¾åŒ¹é…æœ€é€‚åˆçš„å¤„ç†ç­–ç•¥
5. **é…ç½®ç”Ÿæˆ**: ç”Ÿæˆé«˜ã€ä¸­ã€ä½ä¸‰å¥—é…ç½®æ–¹æ¡ˆ
6. **æ€§èƒ½é¢„æµ‹**: é¢„æµ‹ä¸åŒé…ç½®çš„å¤„ç†æ—¶é—´å’Œèµ„æºæ¶ˆè€—
7. **é£é™©è¯„ä¼°**: è¯„ä¼°ä¸åŒé…ç½®çš„ç¨³å®šæ€§å’Œå¤±è´¥é£é™©
8. **æ¨èè¾“å‡º**: è¾“å‡ºæœ€ä¼˜é…ç½®æ¨èå’Œä½¿ç”¨å»ºè®®

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| sourceFile | string | æ˜¯ | - | æºæ–‡ä»¶åï¼ˆç›¸å¯¹äºæ•°æ®æºç›®å½•ï¼‰ |
| tileType | string | å¦ | "map" | åˆ‡ç‰‡ç±»å‹ï¼š"map"æˆ–"terrain" |
| minZoom | number | å¦ | - | æœ€å°ç¼©æ”¾çº§åˆ«ï¼ˆå¯é€‰ï¼Œç”¨äºå®šåˆ¶æ¨èï¼‰ |
| maxZoom | number | å¦ | - | æœ€å¤§ç¼©æ”¾çº§åˆ«ï¼ˆå¯é€‰ï¼Œç”¨äºå®šåˆ¶æ¨èï¼‰ |

#### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1: åŸºæœ¬æ¨è**
```json
{
  "sourceFile": "taiwan.tif",
  "tileType": "map"
}
```

**ç¤ºä¾‹2: è‡ªå®šä¹‰ç¼©æ”¾çº§åˆ«**
```json
{
  "sourceFile": "elevation.tif",
  "tileType": "terrain",
  "minZoom": 0,
  "maxZoom": 12
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | è¯·æ±‚æ˜¯å¦æˆåŠŸ |
| fileSize | number | æ–‡ä»¶å¤§å°ï¼ˆGBï¼‰ |
| systemInfo | object | ç³»ç»Ÿä¿¡æ¯ |
| systemInfo.cpuCount | number | CPUæ ¸å¿ƒæ•° |
| systemInfo.memoryTotalGb | number | ç³»ç»Ÿæ€»å†…å­˜ï¼ˆGBï¼‰ |
| recommendations | object | é…ç½®æ¨è |
| recommendations.maxZoom | number | æ¨èçš„æœ€å¤§ç¼©æ”¾çº§åˆ« |
| recommendations.minZoom | number | æ¨èçš„æœ€å°ç¼©æ”¾çº§åˆ« |
| recommendations.tileFormat | string | æ¨èçš„ç“¦ç‰‡æ ¼å¼ |
| recommendations.quality | number | æ¨èçš„è´¨é‡è®¾ç½® |
| recommendations.processes | number | æ¨èçš„å¹¶è¡Œè¿›ç¨‹æ•° |
| recommendations.maxMemory | string | æ¨èçš„æœ€å¤§å†…å­˜é™åˆ¶ï¼ˆä»…åœ°å½¢ç“¦ç‰‡ï¼Œå•ä½ï¼šmï¼‰ |

#### å“åº”ç¤ºä¾‹

**åœ°å›¾ç“¦ç‰‡æ¨è**
```json
{
  "success": true,
  "fileSize": 1.06,
  "systemInfo": {
    "cpuCount": 10,
    "memoryTotalGb": 16
  },
  "recommendations": {
    "maxZoom": 16,
    "minZoom": 0,
    "tileFormat": "webp",
    "quality": 80,
    "processes": 6
  }
}
```

**åœ°å½¢ç“¦ç‰‡æ¨è**
```json
{
  "success": true,
  "fileSize": 0.52,
  "systemInfo": {
    "cpuCount": 8,
    "memoryTotalGb": 12
  },
  "recommendations": {
    "maxZoom": 15,
    "minZoom": 0,
    "tileFormat": "png",
    "quality": 100,
    "processes": 4,
    "maxMemory": "8g"
  }
}
```

## ğŸ’¼ å·¥ä½œç©ºé—´ç®¡ç†

### åˆ›å»ºå·¥ä½œç©ºé—´æ–‡ä»¶å¤¹

**POST** `/api/workspace/createFolder`

åœ¨å·¥ä½œç©ºé—´ä¸­åˆ›å»ºæ–°çš„æ–‡ä»¶å¤¹ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **å‚æ•°éªŒè¯**: éªŒè¯folderPathå‚æ•°æ˜¯å¦æä¾›ä¸”æ ¼å¼æ­£ç¡®
2. **è·¯å¾„å®‰å…¨éªŒè¯**: ä½¿ç”¨validateWorkspacePathéªŒè¯è·¯å¾„å®‰å…¨æ€§
3. **è·¯å¾„æ˜ å°„**: å°†ç›¸å¯¹è·¯å¾„æ˜ å°„åˆ°å·¥ä½œç©ºé—´çš„å®Œæ•´è·¯å¾„
4. **å­˜åœ¨æ€§æ£€æŸ¥**: æ£€æŸ¥ç›®æ ‡æ–‡ä»¶å¤¹æ˜¯å¦å·²å­˜åœ¨
5. **æƒé™éªŒè¯**: éªŒè¯æ˜¯å¦æœ‰åˆ›å»ºæ–‡ä»¶å¤¹çš„æƒé™
6. **é€’å½’åˆ›å»º**: ä½¿ç”¨os.makedirsé€’å½’åˆ›å»ºæ–‡ä»¶å¤¹åŠå…¶çˆ¶ç›®å½•
7. **åˆ›å»ºç¡®è®¤**: éªŒè¯æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ
8. **å“åº”è¿”å›**: è¿”å›åˆ›å»ºç»“æœå’Œæ–‡ä»¶å¤¹ä¿¡æ¯

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| folderPath | string | æ˜¯ | è¦åˆ›å»ºçš„æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆç›¸å¯¹äºå·¥ä½œç©ºé—´æ ¹ç›®å½•ï¼‰ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "folderPath": "new-project/maps"
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| folderPath | string | åˆ›å»ºçš„æ–‡ä»¶å¤¹è·¯å¾„ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ",
  "folderPath": "new-project/maps"
}
```

### åˆ é™¤å·¥ä½œç©ºé—´æ–‡ä»¶å¤¹

**DELETE** `/api/workspace/folder/<path:folderPath>`

åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶å¤¹åŠå…¶æ‰€æœ‰å†…å®¹ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **è·¯å¾„éªŒè¯**: éªŒè¯folderPathçš„å®‰å…¨æ€§å’Œæœ‰æ•ˆæ€§
2. **è·¯å¾„æ˜ å°„**: å°†ç›¸å¯¹è·¯å¾„æ˜ å°„åˆ°å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„
3. **å­˜åœ¨æ€§æ£€æŸ¥**: æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ä¸”ç¡®å®æ˜¯ç›®å½•
4. **æƒé™éªŒè¯**: éªŒè¯æ˜¯å¦æœ‰åˆ é™¤æƒé™
5. **å®‰å…¨æ£€æŸ¥**: ç¡®ä¿ä¸åˆ é™¤é‡è¦çš„ç³»ç»Ÿç›®å½•
6. **é€’å½’åˆ é™¤**: ä½¿ç”¨shutil.rmtreeé€’å½’åˆ é™¤æ–‡ä»¶å¤¹
7. **åˆ é™¤ç¡®è®¤**: éªŒè¯åˆ é™¤æ“ä½œæˆåŠŸ
8. **å“åº”è¿”å›**: è¿”å›åˆ é™¤ç»“æœä¿¡æ¯

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| folderPath | string | æ˜¯ | è¦åˆ é™¤çš„æ–‡ä»¶å¤¹è·¯å¾„ |

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| folderPath | string | è¢«åˆ é™¤çš„æ–‡ä»¶å¤¹è·¯å¾„ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "æ–‡ä»¶å¤¹åˆ é™¤æˆåŠŸ",
  "folderPath": "old-project"
}
```

### é‡å‘½åå·¥ä½œç©ºé—´æ–‡ä»¶å¤¹

**PUT** `/api/workspace/folder/<path:folderPath>/rename`

é‡å‘½åæŒ‡å®šçš„æ–‡ä»¶å¤¹ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **å‚æ•°éªŒè¯**: éªŒè¯newNameå‚æ•°æ˜¯å¦æä¾›ä¸”åˆæ³•
2. **è·¯å¾„éªŒè¯**: éªŒè¯åŸæ–‡ä»¶å¤¹è·¯å¾„çš„å®‰å…¨æ€§
3. **å­˜åœ¨æ€§æ£€æŸ¥**: æ£€æŸ¥æºæ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
4. **åç§°æ£€æŸ¥**: éªŒè¯æ–°åç§°çš„åˆæ³•æ€§ï¼ˆä¸åŒ…å«éæ³•å­—ç¬¦ï¼‰
5. **ç›®æ ‡è·¯å¾„æ„å»º**: æ„å»ºæ–°çš„å®Œæ•´è·¯å¾„
6. **å†²çªæ£€æµ‹**: æ£€æŸ¥ç›®æ ‡è·¯å¾„æ˜¯å¦å·²å­˜åœ¨
7. **åŸå­é‡å‘½å**: ä½¿ç”¨os.renameæ‰§è¡ŒåŸå­æ€§é‡å‘½å
8. **è·¯å¾„è½¬æ¢**: å°†ç»å¯¹è·¯å¾„è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„è¿”å›

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| folderPath | string | æ˜¯ | è¦é‡å‘½åçš„æ–‡ä»¶å¤¹è·¯å¾„ |

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| newName | string | æ˜¯ | æ–°çš„æ–‡ä»¶å¤¹åç§° |

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| oldPath | string | åŸè·¯å¾„ |
| newPath | string | æ–°è·¯å¾„ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "æ–‡ä»¶å¤¹é‡å‘½åæˆåŠŸ",
  "oldPath": "old-project",
  "newPath": "updated-project"
}
```

### è·å–å·¥ä½œç©ºé—´ä¿¡æ¯

**GET** `/api/workspace/info`

è·å–å·¥ä½œç©ºé—´çš„è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ç›®å½•éå†**: ä½¿ç”¨os.walké€’å½’éå†å·¥ä½œç©ºé—´æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•
2. **å¤§å°ç»Ÿè®¡**: è®¡ç®—æ¯ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œç´¯è®¡æ€»å¤§å°
3. **æ•°é‡ç»Ÿè®¡**: ç»Ÿè®¡æ–‡ä»¶æ€»æ•°å’Œç›®å½•æ€»æ•°
4. **ç±»å‹åˆ†æ**: æŒ‰æ–‡ä»¶æ‰©å±•ååˆ†ç±»ç»Ÿè®¡
5. **å¼‚å¸¸å¤„ç†**: å¤„ç†æ–‡ä»¶è®¿é—®å¼‚å¸¸ï¼Œè·³è¿‡æ— æ³•è®¿é—®çš„æ–‡ä»¶
6. **æ ¼å¼åŒ–å¤„ç†**: ä½¿ç”¨formatFileSizeå°†å­—èŠ‚æ•°è½¬æ¢ä¸ºå¯è¯»æ ¼å¼
7. **æ—¶é—´è®°å½•**: è®°å½•ç»Ÿè®¡ä¿¡æ¯çš„æ›´æ–°æ—¶é—´
8. **JSONå°è£…**: è¿”å›ç»“æ„åŒ–çš„å·¥ä½œç©ºé—´ä¿¡æ¯

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| workspaceInfo | object | å·¥ä½œç©ºé—´ä¿¡æ¯ |
| workspaceInfo.basePath | string | åŸºç¡€è·¯å¾„ |
| workspaceInfo.totalSize | number | æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| workspaceInfo.totalSizeFormatted | string | æ ¼å¼åŒ–æ€»å¤§å° |
| workspaceInfo.totalFiles | number | æ€»æ–‡ä»¶æ•° |
| workspaceInfo.totalDirectories | number | æ€»ç›®å½•æ•° |
| workspaceInfo.lastUpdated | string | æœ€åæ›´æ–°æ—¶é—´ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "workspaceInfo": {
    "basePath": "/app/tiles",
    "totalSize": 50438742016,
    "totalSizeFormatted": "46.98 GB",
    "totalFiles": 1247,
    "totalDirectories": 23,
    "lastUpdated": "2025-01-08T15:45:00"
  }
}
```

## ğŸ§¹ é€æ˜ç“¦ç‰‡ç®¡ç†

### æ‰«æé€æ˜ç“¦ç‰‡

**POST** `/api/tiles/nodata/scan`

æ‰«ææŒ‡å®šç›®å½•ä¸­åŒ…å«é€æ˜ï¼ˆnodataï¼‰å€¼çš„PNGç“¦ç‰‡ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **è·¯å¾„éªŒè¯**: éªŒè¯ç“¦ç‰‡ç›®å½•è·¯å¾„çš„æœ‰æ•ˆæ€§å’Œå®‰å…¨æ€§
2. **é€’å½’æ‰«æ**: é€’å½’æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰PNGæ–‡ä»¶
3. **å›¾åƒåˆ†æ**: ä½¿ç”¨PILæˆ–OpenCVåˆ†æPNGæ–‡ä»¶çš„Alphaé€šé“
4. **é€æ˜åº¦æ£€æµ‹**: æ£€æµ‹åƒç´ çš„é€æ˜åº¦å€¼ï¼Œè¯†åˆ«é€æ˜åƒç´ 
5. **é˜ˆå€¼åˆ¤æ–­**: æ ¹æ®é€æ˜åº¦é˜ˆå€¼åˆ¤æ–­ç“¦ç‰‡æ˜¯å¦ä¸ºé€æ˜ç“¦ç‰‡
6. **ç»Ÿè®¡è®¡ç®—**: ç»Ÿè®¡å„çº§åˆ«çš„é€æ˜ç“¦ç‰‡æ•°é‡å’Œæ¯”ä¾‹
7. **ç»“æœè®°å½•**: è®°å½•é€æ˜ç“¦ç‰‡çš„æ–‡ä»¶è·¯å¾„å’Œè¯¦ç»†ä¿¡æ¯
8. **æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆè¯¦ç»†çš„æ‰«ææŠ¥å‘Šå’Œç»Ÿè®¡æ•°æ®

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| tilesPath | string | æ˜¯ | - | ç“¦ç‰‡ç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºtilesç›®å½•ï¼‰ |
| includeDetails | boolean | å¦ | false | æ˜¯å¦è¿”å›è¯¦ç»†æ–‡ä»¶åˆ—è¡¨ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "tilesPath": "project/taiwan/v1",
  "includeDetails": true
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ‰«ææ˜¯å¦æˆåŠŸ |
| summary | object | æ‰«ææ‘˜è¦ä¿¡æ¯ |
| summary.totalChecked | number | æ£€æŸ¥çš„ç“¦ç‰‡æ€»æ•° |
| summary.nodataTiles | number | åŒ…å«é€æ˜å€¼çš„ç“¦ç‰‡æ•° |
| summary.validTiles | number | æœ‰æ•ˆç“¦ç‰‡æ•° |
| summary.errors | number | æ£€æŸ¥é”™è¯¯æ•° |
| summary.nodataPercentage | number | é€æ˜ç“¦ç‰‡ç™¾åˆ†æ¯” |
| zoomLevelStats | object | æŒ‰ç¼©æ”¾çº§åˆ«ç»Ÿè®¡ |
| nodataFiles | array | é€æ˜ç“¦ç‰‡æ–‡ä»¶åˆ—è¡¨ï¼ˆincludeDetails=trueæ—¶ï¼‰ |
| message | string | æ‰«æç»“æœæ¶ˆæ¯ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "summary": {
    "totalChecked": 2048,
    "nodataTiles": 156,
    "validTiles": 1892,
    "errors": 0,
    "nodataPercentage": 7.6
  },
  "zoomLevelStats": {
    "0": {"total": 1, "nodata": 0},
    "1": {"total": 4, "nodata": 0},
    "2": {"total": 16, "nodata": 2},
    "3": {"total": 64, "nodata": 8},
    "4": {"total": 256, "nodata": 24},
    "5": {"total": 1024, "nodata": 67},
    "6": {"total": 683, "nodata": 55}
  },
  "nodataFiles": [
    "2/1_2.png",
    "2/2_1.png",
    "3/5_6.png"
  ],
  "message": "æ‰«æå®Œæˆï¼æ£€æŸ¥äº†2048ä¸ªç“¦ç‰‡ï¼Œå‘ç°156ä¸ªé€æ˜ç“¦ç‰‡ (7.6%)"
}
```

### åˆ é™¤é€æ˜ç“¦ç‰‡

**POST** `/api/tiles/nodata/delete`

åˆ é™¤åŒ…å«é€æ˜ï¼ˆnodataï¼‰å€¼çš„PNGç“¦ç‰‡ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **è·¯å¾„éªŒè¯**: éªŒè¯ç“¦ç‰‡ç›®å½•è·¯å¾„çš„æœ‰æ•ˆæ€§
2. **æ‰«æåˆ†æ**: é‡æ–°æ‰«ææˆ–å¼•ç”¨ä¹‹å‰çš„æ‰«æç»“æœ
3. **æ–‡ä»¶éªŒè¯**: éªŒè¯è¦åˆ é™¤çš„æ¯ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨
4. **æ‰¹é‡åˆ é™¤**: æ‰¹é‡åˆ é™¤è¯†åˆ«å‡ºçš„é€æ˜ç“¦ç‰‡æ–‡ä»¶
5. **ç›®å½•æ£€æŸ¥**: æ£€æŸ¥åˆ é™¤åçš„ç©ºç›®å½•
6. **ç©ºç›®å½•æ¸…ç†**: åˆ é™¤å®Œå…¨ç©ºçš„ç›®å½•ç»“æ„
7. **ç»Ÿè®¡è®¡ç®—**: ç»Ÿè®¡åˆ é™¤çš„æ–‡ä»¶æ•°é‡å’Œé‡Šæ”¾çš„ç©ºé—´
8. **ç»“æœæŠ¥å‘Š**: ç”Ÿæˆåˆ é™¤æ“ä½œçš„è¯¦ç»†æŠ¥å‘Š

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| tilesPath | string | æ˜¯ | - | ç“¦ç‰‡ç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºtilesç›®å½•ï¼‰ |
| includeDetails | boolean | å¦ | true | æ˜¯å¦è¿”å›åˆ é™¤æ–‡ä»¶åˆ—è¡¨ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "tilesPath": "project/taiwan/v1",
  "includeDetails": true
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | åˆ é™¤æ˜¯å¦æˆåŠŸ |
| summary | object | åˆ é™¤æ‘˜è¦ä¿¡æ¯ |
| summary.totalChecked | number | æ£€æŸ¥çš„ç“¦ç‰‡æ€»æ•° |
| summary.deletedTiles | number | åˆ é™¤çš„ç“¦ç‰‡æ•° |
| summary.cleanedDirectories | number | æ¸…ç†çš„ç›®å½•æ•° |
| summary.errors | number | åˆ é™¤é”™è¯¯æ•° |
| deletedFiles | array | åˆ é™¤çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆincludeDetails=trueæ—¶ï¼‰ |
| message | string | åˆ é™¤ç»“æœæ¶ˆæ¯ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "summary": {
    "totalChecked": 2048,
    "deletedTiles": 156,
    "cleanedDirectories": 23,
    "errors": 0
  },
  "deletedFiles": [
    "2/1_2.png",
    "2/2_1.png",
    "3/5_6.png"
  ],
  "message": "åˆ é™¤å®Œæˆï¼æ£€æŸ¥äº†2048ä¸ªç“¦ç‰‡ï¼Œåˆ é™¤äº†156ä¸ªé€æ˜ç“¦ç‰‡ï¼Œæ¸…ç†äº†23ä¸ªç›®å½•"
}
```

## ğŸ”ï¸ åœ°å½¢å¤„ç†

### æ›´æ–°Layer.json

**POST** `/api/terrain/layer`

æ›´æ–°åœ°å½¢ç“¦ç‰‡çš„layer.jsonå…ƒæ•°æ®æ–‡ä»¶ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **è·¯å¾„éªŒè¯**: éªŒè¯åœ°å½¢ç›®å½•è·¯å¾„çš„æœ‰æ•ˆæ€§
2. **ç›®å½•æ‰«æ**: æ‰«æåœ°å½¢ç›®å½•ä¸­çš„æ‰€æœ‰.terrainæ–‡ä»¶
3. **çº§åˆ«åˆ†æ**: åˆ†æç°æœ‰ç“¦ç‰‡çš„çº§åˆ«åˆ†å¸ƒå’Œç»“æ„
4. **ç“¦ç‰‡ç»Ÿè®¡**: ç»Ÿè®¡æ¯ä¸ªçº§åˆ«çš„ç“¦ç‰‡æ•°é‡å’Œè¦†ç›–èŒƒå›´
5. **è¾¹ç•Œè®¡ç®—**: è®¡ç®—æ‰€æœ‰ç“¦ç‰‡çš„åœ°ç†è¾¹ç•ŒèŒƒå›´
6. **JSONç”Ÿæˆ**: ç”Ÿæˆç¬¦åˆCesiumæ ‡å‡†çš„layer.jsonæ–‡ä»¶
7. **æ–‡ä»¶å†™å…¥**: å°†layer.jsonå†™å…¥åœ°å½¢ç›®å½•
8. **éªŒè¯ç¡®è®¤**: éªŒè¯ç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼æ­£ç¡®æ€§

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| terrainPath | array | æ˜¯ | - | åœ°å½¢ç›®å½•è·¯å¾„æ•°ç»„ï¼Œå¦‚["terrain", "taiwan", "v1"] |
| bounds | array | å¦ | - | è‡ªå®šä¹‰åœ°ç†è¾¹ç•Œï¼Œæ ¼å¼ï¼š[west, south, east, north] |
| sourceFile | string | å¦ | "taiwan.tif" | æºæ–‡ä»¶åæç¤ºï¼ˆç”¨äºè¡¥å……ä¿¡æ¯ï¼‰ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "terrainPath": ["terrain", "taiwan", "v1"],
  "bounds": [-180.0, -90.0, 180.0, 90.0],
  "sourceFile": "taiwan.tif"
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| layerPath | string | layer.jsonæ–‡ä»¶è·¯å¾„ |
| terrainInfo | object | åœ°å½¢ä¿¡æ¯ |
| terrainInfo.levels | array | çº§åˆ«ä¿¡æ¯ |
| terrainInfo.bounds | object | åœ°ç†è¾¹ç•Œ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "layer.jsonæ›´æ–°æˆåŠŸ",
  "layerPath": "terrain/taiwan/v1/layer.json",
  "terrainInfo": {
    "levels": [0, 1, 2, 3, 4, 5, 6, 7, 8],
    "bounds": {
      "west": 119.31,
      "south": 21.75,
      "east": 124.56,
      "north": 25.93
    }
  }
}
```

### è§£å‹åœ°å½¢ç“¦ç‰‡

**POST** `/api/terrain/decompress`

è§£å‹åœ°å½¢ç“¦ç‰‡æ–‡ä»¶ï¼ˆ.terrain.gz â†’ .terrainï¼‰ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **è·¯å¾„éªŒè¯**: éªŒè¯åœ°å½¢ç›®å½•è·¯å¾„çš„æœ‰æ•ˆæ€§
2. **æ–‡ä»¶æ‰«æ**: æ‰«æç›®å½•ä¸­çš„æ‰€æœ‰.terrain.gzå‹ç¼©æ–‡ä»¶
3. **æ ¼å¼è¯†åˆ«**: è¯†åˆ«å’ŒéªŒè¯å‹ç¼©æ–‡ä»¶æ ¼å¼
4. **è§£å‹å¤„ç†**: ä½¿ç”¨gzipæ¨¡å—è§£å‹æ¯ä¸ªæ–‡ä»¶
5. **å®Œæ•´æ€§éªŒè¯**: éªŒè¯è§£å‹åæ–‡ä»¶çš„å®Œæ•´æ€§
6. **æ–‡ä»¶æ›¿æ¢**: ç”¨è§£å‹åçš„æ–‡ä»¶æ›¿æ¢å‹ç¼©æ–‡ä»¶
7. **æ¸…ç†æ“ä½œ**: æ ¹æ®keepCompressedå‚æ•°å¤„ç†åŸæ–‡ä»¶
8. **ç»“æœç»Ÿè®¡**: ç»Ÿè®¡è§£å‹æˆåŠŸå’Œå¤±è´¥çš„æ–‡ä»¶æ•°é‡

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| terrainPath | array | æ˜¯ | - | åœ°å½¢ç›®å½•è·¯å¾„æ•°ç»„ï¼Œå¦‚["terrain", "taiwan", "v1"] |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "terrainPath": ["terrain", "taiwan", "v1"]
}
```

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æ“ä½œç»“æœæ¶ˆæ¯ |
| decompressInfo | object | è§£å‹ä¿¡æ¯ |
| decompressInfo.terrainDir | string | åœ°å½¢ç›®å½• |
| decompressInfo.totalFiles | number | æ€»æ–‡ä»¶æ•° |
| decompressInfo.successCount | number | æˆåŠŸè§£å‹æ•° |
| decompressInfo.failCount | number | å¤±è´¥æ•° |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "åœ°å½¢è§£å‹å®Œæˆ",
  "decompressInfo": {
    "terrainDir": "terrain/taiwan/v1",
    "totalFiles": 1398,
    "successCount": 1398,
    "failCount": 0
  }
}
```

## ğŸ”¥ Javaåç«¯APIæ¥å£

### ğŸ“‹ Javaåç«¯æ¦‚è¿°

Javaåç«¯åŸºäºSpring Bootæ¡†æ¶ï¼Œæä¾›é«˜æ€§èƒ½çš„åœ°å½¢å’Œåœ°å›¾åˆ‡ç‰‡æœåŠ¡ï¼Œé›†æˆäº†å…ˆè¿›çš„é‡åŒ–ç½‘æ ¼ç®—æ³•å’ŒåŠè¾¹æ•°æ®ç»“æ„ï¼Œæ”¯æŒå¤æ‚çš„ä¸‰ç»´åœ°å½¢ç½‘æ ¼ç”Ÿæˆå’Œä¼˜åŒ–ã€‚

**åŸºç¡€åœ°å€**: `http://localhost:8080`  
**æŠ€æœ¯æ ˆ**: Spring Boot 2.x + MyBatis Plus + GeoTools + GDAL  
**æ ¸å¿ƒç‰¹æ€§**: é‡åŒ–ç½‘æ ¼ã€åŠè¾¹æ•°æ®ç»“æ„ã€å¤šçº§ç»†åˆ†ã€è‡ªé€‚åº”ä¼˜åŒ–

---

## ğŸ”ï¸ Javaåœ°å½¢åˆ‡ç‰‡æœåŠ¡

### åœ°å½¢åˆ‡ç‰‡ï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰- JavaåŸç”Ÿå®ç°

**POST** `/terrain/cut/terrainCutOfFile`

ä½¿ç”¨JavaåŸç”Ÿç®—æ³•è¿›è¡Œé«˜ç²¾åº¦åœ°å½¢åˆ‡ç‰‡ï¼ŒåŸºäºé‡åŒ–ç½‘æ ¼å’ŒåŠè¾¹æ•°æ®ç»“æ„å®ç°ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **é‡åŒ–ç½‘æ ¼ç®—æ³•**: å°†åœ°å½¢é«˜åº¦æ•°æ®é‡åŒ–ä¸º16ä½æ•´æ•°ï¼Œå¤§å¹…å‡å°‘æ•°æ®é‡
2. **åŠè¾¹æ•°æ®ç»“æ„**: é«˜æ•ˆå­˜å‚¨å’Œå¤„ç†ä¸‰è§’ç½‘æ‹“æ‰‘å…³ç³»
3. **è‡ªé€‚åº”ç»†åˆ†**: æ ¹æ®åœ°å½¢å¤æ‚åº¦åŠ¨æ€è°ƒæ•´ä¸‰è§’ç½‘å¯†åº¦
4. **é‡å¿ƒåæ ‡æ’å€¼**: ä½¿ç”¨é‡å¿ƒåæ ‡è¿›è¡Œé«˜ç²¾åº¦é«˜ç¨‹æ’å€¼
5. **è¾¹ç•Œçº¦æŸ**: æ™ºèƒ½å¤„ç†ç“¦ç‰‡è¾¹ç•Œï¼Œç¡®ä¿ç›¸é‚»ç“¦ç‰‡æ— ç¼æ‹¼æ¥

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| file | MultipartFile | æ˜¯ | - | TIFæ ¼å¼çš„åœ°å½¢æ•°æ®æ–‡ä»¶ |
| workspaceGroup | String | æ˜¯ | - | å·¥ä½œç©ºé—´ç»„åç§° |
| workspace | String | æ˜¯ | - | å·¥ä½œç©ºé—´åç§° |
| minZoom | Integer | å¦ | 0 | æœ€å°ç¼©æ”¾çº§åˆ«ï¼ˆèŒƒå›´ï¼š0-22ï¼‰ |
| maxZoom | Integer | å¦ | 14 | æœ€å¤§ç¼©æ”¾çº§åˆ«ï¼ˆèŒƒå›´ï¼š0-22ï¼‰ |
| intensity | Double | å¦ | 4.0 | ç½‘æ ¼ç»†åŒ–å¼ºåº¦ï¼ˆèŒƒå›´ï¼š1.0-16.0ï¼‰ï¼Œå€¼è¶Šå¤§ä¸‰è§’ç½‘è¶Šå¯†é›† |
| calculateNormals | boolean | å¦ | false | æ˜¯å¦è®¡ç®—é¡¶ç‚¹æ³•çº¿ï¼Œç”¨äºå…‰ç…§æ•ˆæœ |
| interpolationType | String | å¦ | "bilinear" | æ’å€¼ç±»å‹ï¼šnearestï¼ˆæœ€è¿‘é‚»ï¼‰ã€bilinearï¼ˆåŒçº¿æ€§ï¼‰ |
| nodataValue | Integer | å¦ | -9999 | æ— æ•°æ®å€¼ï¼Œç”¨äºæ ‡è¯†æ— æ•ˆé«˜ç¨‹æ•°æ® |
| mosaicSize | Integer | å¦ | 16 | ç“¦ç‰‡æ‹¼æ¥ç¼“å†²åŒºå¤§å°ï¼ˆåƒç´ ï¼‰ |
| rasterMaxSize | Integer | å¦ | 16384 | æœ€å¤§æ …æ ¼å°ºå¯¸é™åˆ¶ |
| isContinue | boolean | å¦ | false | æ˜¯å¦ç»§ç»­ä¸­æ–­çš„ä»»åŠ¡ |

#### è¯·æ±‚ç¤ºä¾‹
```bash
curl -X POST "http://localhost:8080/terrain/cut/terrainCutOfFile" \
  -F "file=@elevation.tif" \
  -F "workspaceGroup=project" \
  -F "workspace=terrain_v1" \
  -F "minZoom=0" \
  -F "maxZoom=12" \
  -F "intensity=6.0" \
  -F "calculateNormals=true" \
  -F "interpolationType=bilinear" \
  -F "mosaicSize=32"
```

#### å“åº”ç¤ºä¾‹
```json
{
  "message": "åœ°å½¢åˆ‡ç‰‡ä»»åŠ¡å¯åŠ¨æˆåŠŸ",
  "workspace": "project/terrain_v1",
  "processedLevels": "0-12",
  "estimatedTime": "çº¦15åˆ†é’Ÿ",
  "outputPath": "/app/tiles/project/terrain_v1"
}
```

### åœ°å½¢åˆ‡ç‰‡ï¼ˆè·¯å¾„ï¼‰- JavaåŸç”Ÿå®ç°

**POST** `/terrain/cut/terrainCutOfPath`

é€šè¿‡æ–‡ä»¶è·¯å¾„è¿›è¡Œåœ°å½¢åˆ‡ç‰‡ï¼Œé€‚ç”¨äºæœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶å¤„ç†ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **åœ°å½¢æ•°æ®é¢„å¤„ç†**: è‡ªåŠ¨æ£€æµ‹åæ ‡ç³»å¹¶è¿›è¡Œæ ‡å‡†åŒ–è½¬æ¢
2. **å¤šåˆ†è¾¨ç‡å¤„ç†**: æ™ºèƒ½ç”Ÿæˆå¤šçº§åˆ«çš„åœ°å½¢ç½‘æ ¼
3. **å†…å­˜ä¼˜åŒ–**: é‡‡ç”¨åˆ†å—å¤„ç†ç­–ç•¥ï¼Œæ”¯æŒå¤§æ–‡ä»¶å¤„ç†
4. **æ‹“æ‰‘ä¼˜åŒ–**: è‡ªåŠ¨ä¼˜åŒ–ä¸‰è§’ç½‘æ‹“æ‰‘ç»“æ„ï¼Œå‡å°‘é€€åŒ–ä¸‰è§’å½¢

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| workspaceGroup | String | æ˜¯ | å·¥ä½œç©ºé—´ç»„åç§° |
| workspace | String | æ˜¯ | å·¥ä½œç©ºé—´åç§° |
| filePath | String | æ˜¯ | TIFæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ |
| minZoom | Integer | å¦ | æœ€å°ç¼©æ”¾çº§åˆ« |
| maxZoom | Integer | å¦ | æœ€å¤§ç¼©æ”¾çº§åˆ« |
| intensity | Double | å¦ | ç½‘æ ¼ç»†åŒ–å¼ºåº¦ |
| calculateNormals | boolean | å¦ | æ˜¯å¦è®¡ç®—é¡¶ç‚¹æ³•çº¿ |
| interpolationType | String | å¦ | æ’å€¼ç±»å‹ |
| nodataValue | Integer | å¦ | æ— æ•°æ®å€¼ |
| mosaicSize | Integer | å¦ | æ‹¼æ¥ç¼“å†²åŒºå¤§å° |
| rasterMaxSize | Integer | å¦ | æœ€å¤§æ …æ ¼å°ºå¯¸ |
| isContinue | boolean | å¦ | æ˜¯å¦ç»§ç»­ä¸­æ–­ä»»åŠ¡ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "workspaceGroup": "elevation",
  "workspace": "dem_2024",
  "filePath": "/data/terrain/elevation.tif",
  "minZoom": 0,
  "maxZoom": 15,
  "intensity": 8.0,
  "calculateNormals": true,
  "interpolationType": "bilinear",
  "nodataValue": -9999,
  "mosaicSize": 64,
  "rasterMaxSize": 32768,
  "isContinue": false
}
```

### åˆ›å»ºåœ°å½¢ç“¦ç‰‡ï¼ˆTerraForge APIå…¼å®¹ï¼‰

**POST** `/terrain/cut/tile/terrain`

ä¸Python TerraForge APIå®Œå…¨å…¼å®¹çš„åœ°å½¢åˆ‡ç‰‡æ¥å£ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†å’Œåœ°å½¢åˆå¹¶ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **æ‰¹é‡å¤„ç†å¼•æ“**: æ”¯æŒå¤šæ–‡ä»¶å¹¶è¡Œå¤„ç†ï¼Œæ™ºèƒ½ä»»åŠ¡è°ƒåº¦
2. **åœ°å½¢åˆå¹¶ç®—æ³•**: è‡ªåŠ¨åˆå¹¶å¤šä¸ªåœ°å½¢åŒºåŸŸï¼Œæ™ºèƒ½å¤„ç†è¾¹ç•Œ
3. **ä»»åŠ¡è¿›åº¦ç›‘æ§**: å®æ—¶è·Ÿè¸ªå¤„ç†è¿›åº¦ï¼Œæ”¯æŒä»»åŠ¡æ¢å¤
4. **æ™ºèƒ½çº§åˆ«æ¨è**: æ ¹æ®æ•°æ®ç‰¹å¾è‡ªåŠ¨æ¨èæœ€ä½³ç¼©æ”¾çº§åˆ«

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| folderPaths | List<String> | æ˜¯ | - | æœç´¢æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨ï¼ˆç›¸å¯¹äºæ•°æ®æºç›®å½•ï¼‰ |
| filePatterns | List<String> | å¦ | ["*.tif", "*.tiff"] | æ–‡ä»¶åŒ¹é…æ¨¡å¼ï¼Œæ”¯æŒé€šé…ç¬¦å’Œtxtæ–‡ä»¶åˆ—è¡¨ |
| outputPath | String | æ˜¯ | - | è¾“å‡ºè·¯å¾„ï¼ˆæ”¯æŒ/åˆ†éš”ï¼‰ |
| startZoom | Integer | å¦ | 0 | èµ·å§‹ç¼©æ”¾çº§åˆ«ï¼ˆç²—ç³™çº§åˆ«ï¼‰ |
| endZoom | Integer | å¦ | 8 | ç»“æŸç¼©æ”¾çº§åˆ«ï¼ˆè¯¦ç»†çº§åˆ«ï¼‰ï¼Œæœ€å°å€¼8 |
| maxTriangles | Integer | å¦ | 6291456 | æœ€å¤§ä¸‰è§’å½¢æ•°é‡é™åˆ¶ |
| bounds | List<Double> | å¦ | null | åœ°ç†è¾¹ç•Œ [west, south, east, north] |
| compression | Boolean | å¦ | true | æ˜¯å¦å¯ç”¨å‹ç¼© |
| decompress | Boolean | å¦ | true | æ˜¯å¦è‡ªåŠ¨è§£å‹è¾“å‡ºæ–‡ä»¶ |
| threads | Integer | å¦ | 4 | çº¿ç¨‹æ•° |
| maxMemory | String | å¦ | "8g" | æœ€å¤§å†…å­˜é™åˆ¶ |
| autoZoom | Boolean | å¦ | false | æ˜¯å¦å¯ç”¨æ™ºèƒ½åˆ†çº§ |
| zoomStrategy | String | å¦ | "conservative" | ç¼©æ”¾ç­–ç•¥ï¼šconservativeã€aggressive |
| mergeTerrains | Boolean | å¦ | false | æ˜¯å¦è‡ªåŠ¨åˆå¹¶å¤šä¸ªåœ°å½¢æ–‡ä»¶å¤¹ |

#### è¯·æ±‚ç¤ºä¾‹
```json
{
  "folderPaths": ["elevation", "dem"],
  "filePatterns": ["*.tif", "priority_files.txt"],
  "outputPath": "terrain/merged/v1",
  "startZoom": 0,
  "endZoom": 12,
  "maxTriangles": 8388608,
  "bounds": [119.31, 21.75, 124.56, 25.93],
  "compression": true,
  "decompress": true,
  "threads": 8,
  "maxMemory": "16g",
  "autoZoom": true,
  "zoomStrategy": "conservative",
  "mergeTerrains": true
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "taskId": "terrain_java_1752666579",
  "message": "åœ°å½¢åˆ‡ç‰‡ä»»åŠ¡å·²å¯åŠ¨ï¼Œå°†å¤„ç† 5 ä¸ªæ–‡ä»¶",
  "statusUrl": "/api/tasks/terrain_java_1752666579",
  "success": true,
  "parameters": {
    "maxMemory": "16g",
    "outputPath": ["terrain", "merged", "v1"],
    "threads": 8,
    "totalFiles": 5,
    "type": "terrain",
    "zoomRange": "0-12"
  }
}
```

---

## ğŸ—ºï¸ Javaåœ°å›¾åˆ‡ç‰‡æœåŠ¡

### åœ°å›¾åˆ‡ç‰‡ï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰- Javaç²¾å‡†ç®—æ³•

**POST** `/map/cut/mapCutOfFile`

ä½¿ç”¨JavaåŸç”Ÿç®—æ³•è¿›è¡Œé«˜ç²¾åº¦åœ°å›¾åˆ‡ç‰‡ï¼Œé‡‡ç”¨ç²¾ç¡®åƒç´ è®¡ç®—å’Œè¾¹ç•Œæ‰©å±•ç­–ç•¥è§£å†³ç“¦ç‰‡é—´ç¼éš™é—®é¢˜ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **ç²¾ç¡®åƒç´ è®¡ç®—**: åŸºäºWebå¢¨å¡æ‰˜æŠ•å½±çš„ç²¾ç¡®åæ ‡è½¬æ¢
2. **é˜²ç¼éš™ç®—æ³•**: é‡‡ç”¨è¾¹ç•Œæ‰©å±•å’ŒåŒçº¿æ€§æ’å€¼æ¶ˆé™¤ç“¦ç‰‡é—´ç¼éš™
3. **å†…å­˜åˆ†å—å¤„ç†**: æ™ºèƒ½åˆ†å—ç­–ç•¥ï¼Œæ”¯æŒè¶…å¤§å›¾åƒå¤„ç†
4. **åæ ‡ç³»è½¬æ¢**: è‡ªåŠ¨æ£€æµ‹å¹¶è½¬æ¢ä¸ºæ ‡å‡†Webå¢¨å¡æ‰˜ï¼ˆEPSG:3857ï¼‰
5. **è´¨é‡ä¼˜åŒ–**: å¤šçº§é‡‡æ ·å’ŒæŠ—é”¯é½¿å¤„ç†ï¼Œç¡®ä¿ç“¦ç‰‡è´¨é‡

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| file | MultipartFile | æ˜¯ | åœ°å›¾å›¾åƒæ–‡ä»¶ï¼ˆæ”¯æŒTIFã€TIFFç­‰æ ¼å¼ï¼‰ |
| workspaceGroup | String | æ˜¯ | å·¥ä½œç©ºé—´ç»„åç§° |
| workspace | String | æ˜¯ | å·¥ä½œç©ºé—´åç§° |
| type | String | æ˜¯ | æ–‡ä»¶ç±»å‹ï¼š1ï¼ˆç”µå­åœ°å›¾ï¼‰ã€2ï¼ˆé¥æ„Ÿå½±åƒï¼‰ |
| minZoom | Integer | æ˜¯ | æœ€å°ç¼©æ”¾çº§åˆ« |
| maxZoom | Integer | æ˜¯ | æœ€å¤§ç¼©æ”¾çº§åˆ« |

#### è¯·æ±‚ç¤ºä¾‹
```bash
curl -X POST "http://localhost:8080/map/cut/mapCutOfFile" \
  -F "file=@satellite.tif" \
  -F "workspaceGroup=maps" \
  -F "workspace=satellite_2024" \
  -F "type=2" \
  -F "minZoom=0" \
  -F "maxZoom=18"
```

### åœ°å›¾åˆ‡ç‰‡ï¼ˆè·¯å¾„ï¼‰- Javaç²¾å‡†ç®—æ³•

**POST** `/map/cut/mapCutOfPath`

é€šè¿‡æ–‡ä»¶è·¯å¾„è¿›è¡Œåœ°å›¾åˆ‡ç‰‡ï¼Œé€‚ç”¨äºæœåŠ¡å™¨æœ¬åœ°å¤§æ–‡ä»¶å¤„ç†ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **Webå¢¨å¡æ‰˜æ ‡å‡†åŒ–**: ä¸¥æ ¼æŒ‰ç…§Webå¢¨å¡æ‰˜æ ‡å‡†è¿›è¡Œåæ ‡è½¬æ¢
2. **ç“¦ç‰‡è¾¹ç•Œè®¡ç®—**: ç²¾ç¡®è®¡ç®—æ¯ä¸ªç“¦ç‰‡çš„åœ°ç†è¾¹ç•Œ
3. **é‡å åŒºåŸŸå¤„ç†**: æ™ºèƒ½å¤„ç†å›¾åƒä¸ç“¦ç‰‡çš„é‡å åŒºåŸŸ
4. **é«˜è´¨é‡æ¸²æŸ“**: ä½¿ç”¨é«˜è´¨é‡æ¸²æŸ“ç®—æ³•ï¼Œç¡®ä¿è§†è§‰æ•ˆæœ

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| workspaceGroup | String | æ˜¯ | å·¥ä½œç©ºé—´ç»„åç§° |
| workspace | String | æ˜¯ | å·¥ä½œç©ºé—´åç§° |
| type | String | æ˜¯ | æ–‡ä»¶ç±»å‹ |
| tifDir | String | æ˜¯ | TIFæ–‡ä»¶å®Œæ•´è·¯å¾„ |
| minZoom | Integer | æ˜¯ | æœ€å°ç¼©æ”¾çº§åˆ« |
| maxZoom | Integer | æ˜¯ | æœ€å¤§ç¼©æ”¾çº§åˆ« |
| backSuccessUrl | String | å¦ | æˆåŠŸå›è°ƒåœ°å€ |
| backFailUrl | String | å¦ | å¤±è´¥å›è°ƒåœ°å€ |

### ç´¢å¼•ç“¦ç‰‡åˆ‡ç‰‡ï¼ˆTerraForge APIå…¼å®¹ï¼‰

**POST** `/map/cut/tile/indexedTiles`

åŸºäºç©ºé—´ç´¢å¼•çš„é«˜æ€§èƒ½ç“¦ç‰‡ç”Ÿæˆï¼Œä¸Python TerraForge APIå®Œå…¨å…¼å®¹ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **ç©ºé—´ç´¢å¼•æ„å»º**: ç”ŸæˆSHPåˆ†å¹…çŸ¢é‡ç´¢å¼•ï¼Œç²¾ç¡®è®°å½•ç©ºé—´å…³ç³»
2. **å…ƒæ•°æ®ç®¡ç†**: è¯¦ç»†è®°å½•æ¯ä¸ªç“¦ç‰‡çš„ä½ç½®ã€å…³è”æ–‡ä»¶ã€åƒç´ ç»Ÿè®¡ç­‰
3. **ç²¾ç¡®åˆ‡å‰²**: ç›´æ¥ä½¿ç”¨GDALè¿›è¡Œç²¾ç¡®åˆ‡å‰²ï¼Œæ— ä¸­é—´VRTå±‚
4. **å¤šè¿›ç¨‹å¹¶è¡Œ**: æ”¯æŒå¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†ï¼Œå¤§å¹…æå‡å¤„ç†æ•ˆç‡
5. **å¢é‡æ›´æ–°**: æ”¯æŒå¢é‡æ›´æ–°ï¼Œå¤ç”¨ç°æœ‰ç“¦ç‰‡
6. **é€æ˜ç“¦ç‰‡å¤„ç†**: æ™ºèƒ½æ£€æµ‹å’Œå¤„ç†é€æ˜ç“¦ç‰‡

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| folderPaths | List<String> | æ˜¯ | - | æ•°æ®æºæ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨ |
| filePatterns | List<String> | æ˜¯ | - | æ–‡ä»¶æ¨¡å¼åˆ—è¡¨ï¼ˆæ”¯æŒé€šé…ç¬¦å’Œtxtæ–‡ä»¶ï¼‰ |
| outputPath | String | æ˜¯ | - | è¾“å‡ºè·¯å¾„ï¼ˆæ”¯æŒ/åˆ†éš”ï¼‰ |
| minZoom | Integer | å¦ | 0 | æœ€å°ç¼©æ”¾çº§åˆ« |
| maxZoom | Integer | å¦ | 12 | æœ€å¤§ç¼©æ”¾çº§åˆ« |
| tileSize | Integer | å¦ | 256 | ç“¦ç‰‡å¤§å° |
| processes | Integer | å¦ | 4 | è¿›ç¨‹æ•° |
| maxMemory | String | å¦ | "8g" | æœ€å¤§å†…å­˜é™åˆ¶ |
| resampling | String | å¦ | "near" | é‡é‡‡æ ·æ–¹æ³•ï¼šnearã€bilinearã€cubicã€average |
| generateShpIndex | Boolean | å¦ | true | æ˜¯å¦ç”ŸæˆSHPçŸ¢é‡ç´¢å¼• |
| enableIncrementalUpdate | Boolean | å¦ | false | æ˜¯å¦å¯ç”¨å¢é‡æ›´æ–° |
| skipNodataTiles | Boolean | å¦ | false | æ˜¯å¦è·³è¿‡é€æ˜ç“¦ç‰‡ |

### æ‰«æé€æ˜ç“¦ç‰‡ï¼ˆTerraForge APIå…¼å®¹ï¼‰

**POST** `/map/cut/tiles/nodata/scan`

æ‰«ææŒ‡å®šç›®å½•ä¸­åŒ…å«é€æ˜ï¼ˆnodataï¼‰å€¼çš„PNGç“¦ç‰‡ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **Alphaé€šé“åˆ†æ**: ä½¿ç”¨PIL/OpenCVåˆ†æPNGæ–‡ä»¶çš„Alphaé€šé“
2. **é€æ˜åº¦æ£€æµ‹**: åŸºäºé˜ˆå€¼åˆ¤æ–­ç“¦ç‰‡é€æ˜åº¦
3. **ç»Ÿè®¡åˆ†æ**: æŒ‰ç¼©æ”¾çº§åˆ«ç»Ÿè®¡é€æ˜ç“¦ç‰‡åˆ†å¸ƒ
4. **æ‰¹é‡å¤„ç†**: é«˜æ•ˆæ‰¹é‡æ‰«æå¤§é‡ç“¦ç‰‡æ–‡ä»¶

#### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| tilesPath | String | æ˜¯ | - | ç“¦ç‰‡ç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºtilesç›®å½•ï¼‰ |
| includeDetails | Boolean | å¦ | false | æ˜¯å¦è¿”å›è¯¦ç»†æ–‡ä»¶åˆ—è¡¨ |

### åˆ é™¤é€æ˜ç“¦ç‰‡ï¼ˆTerraForge APIå…¼å®¹ï¼‰

**POST** `/map/cut/tiles/nodata/delete`

åˆ é™¤åŒ…å«é€æ˜ï¼ˆnodataï¼‰å€¼çš„PNGç“¦ç‰‡ï¼Œå¹¶æ¸…ç†ç©ºç›®å½•ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **æ‰¹é‡åˆ é™¤**: é«˜æ•ˆæ‰¹é‡åˆ é™¤é€æ˜ç“¦ç‰‡æ–‡ä»¶
2. **ç›®å½•æ¸…ç†**: è‡ªåŠ¨æ¸…ç†åˆ é™¤åçš„ç©ºç›®å½•ç»“æ„
3. **å®‰å…¨éªŒè¯**: åˆ é™¤å‰è¿›è¡Œå®‰å…¨éªŒè¯ï¼Œé˜²æ­¢è¯¯åˆ 
4. **ç»Ÿè®¡æŠ¥å‘Š**: ç”Ÿæˆè¯¦ç»†çš„åˆ é™¤æ“ä½œç»Ÿè®¡æŠ¥å‘Š

---

## ğŸŒ Javaç“¦ç‰‡æœåŠ¡

### TMSç“¦ç‰‡æœåŠ¡

**GET** `/map/{workspaceGroup}/{workspace}/{z}/{x}_{y}.png`

æä¾›æ ‡å‡†TMSï¼ˆTile Map Serviceï¼‰æ ¼å¼çš„ç“¦ç‰‡æœåŠ¡ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **TMSåæ ‡ç³»**: æ ‡å‡†TMSåæ ‡ç³»ï¼ŒYè½´ä»ä¸‹åˆ°ä¸Š
2. **æœ¬åœ°ç¼“å­˜**: é›†æˆæœ¬åœ°ç¼“å­˜æœåŠ¡ï¼Œæå‡è®¿é—®æ€§èƒ½
3. **å·¥ä½œç©ºé—´ç®¡ç†**: åŸºäºå·¥ä½œç©ºé—´çš„ç“¦ç‰‡ç»„ç»‡å’Œæƒé™æ§åˆ¶
4. **åæ ‡è½¬æ¢**: è‡ªåŠ¨å¤„ç†TMSä¸æ ‡å‡†XYZåæ ‡çš„è½¬æ¢

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| workspaceGroup | String | å·¥ä½œç©ºé—´ç»„åç§° |
| workspace | String | å·¥ä½œç©ºé—´åç§° |
| z | int | ç¼©æ”¾çº§åˆ« |
| x | int | Xåæ ‡ï¼ˆåˆ—å·ï¼‰ |
| y | int | Yåæ ‡ï¼ˆè¡Œå·ï¼ŒTMSæ ¼å¼ï¼‰ |

### XYZç“¦ç‰‡æœåŠ¡

**GET** `/map/{workspaceGroup}/{workspace}/{z}/{x}/{y}.png`

æä¾›æ ‡å‡†XYZæ ¼å¼çš„ç“¦ç‰‡æœåŠ¡ï¼Œå…¼å®¹å¤§å¤šæ•°åœ°å›¾å®¢æˆ·ç«¯ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **XYZåæ ‡ç³»**: æ ‡å‡†XYZåæ ‡ç³»ï¼ŒYè½´ä»ä¸Šåˆ°ä¸‹
2. **æ ‡å‡†å…¼å®¹**: å®Œå…¨å…¼å®¹OpenStreetMapç­‰æ ‡å‡†XYZæœåŠ¡
3. **é«˜æ€§èƒ½è®¿é—®**: ä¼˜åŒ–çš„æ–‡ä»¶è®¿é—®å’Œç¼“å­˜ç­–ç•¥

### WMTSæ ‡å‡†æœåŠ¡

**GET** `/map/wmts/capabilities`

æä¾›ç¬¦åˆOGC WMTSæ ‡å‡†çš„æœåŠ¡èƒ½åŠ›æè¿°æ–‡æ¡£ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **OGCæ ‡å‡†**: å®Œå…¨ç¬¦åˆOGC WMTS 1.0.0æ ‡å‡†
2. **å…ƒæ•°æ®ç®¡ç†**: è‡ªåŠ¨ç”ŸæˆæœåŠ¡å…ƒæ•°æ®å’Œèƒ½åŠ›æè¿°
3. **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒPNGã€JPEGç­‰å¤šç§å›¾åƒæ ¼å¼
4. **ç¼“å­˜ä¼˜åŒ–**: æ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼Œæå‡æœåŠ¡æ€§èƒ½

#### æŸ¥è¯¢å‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| SERVICE | String | WMTS | æœåŠ¡ç±»å‹ï¼Œå›ºå®šå€¼"WMTS" |
| REQUEST | String | GetCapabilities | è¯·æ±‚ç±»å‹ |
| VERSION | String | 1.0.0 | WMTSç‰ˆæœ¬å· |

### WMTS GetTileè¯·æ±‚

**GET** `/map/wmts/tile`

æ ‡å‡†WMTS GetTileè¯·æ±‚ï¼Œè·å–æŒ‡å®šç“¦ç‰‡ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **å‚æ•°éªŒè¯**: ä¸¥æ ¼æŒ‰ç…§WMTSæ ‡å‡†éªŒè¯è¯·æ±‚å‚æ•°
2. **å›¾å±‚ç®¡ç†**: æ”¯æŒå¤šå›¾å±‚ç®¡ç†å’Œæƒé™æ§åˆ¶
3. **æ ¼å¼è½¬æ¢**: æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼çš„åŠ¨æ€è½¬æ¢
4. **é”™è¯¯å¤„ç†**: æ ‡å‡†åŒ–çš„é”™è¯¯å“åº”å’ŒçŠ¶æ€ç 

#### æŸ¥è¯¢å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| SERVICE | String | å¦ | WMTS | æœåŠ¡ç±»å‹ |
| REQUEST | String | å¦ | GetTile | è¯·æ±‚ç±»å‹ |
| VERSION | String | å¦ | 1.0.0 | ç‰ˆæœ¬å· |
| LAYER | String | æ˜¯ | - | å›¾å±‚æ ‡è¯†ç¬¦ï¼ˆæ ¼å¼ï¼šworkspaceGroup/workspaceï¼‰ |
| STYLE | String | å¦ | default | æ ·å¼åç§° |
| FORMAT | String | å¦ | image/png | å›¾åƒæ ¼å¼ |
| TILEMATRIXSET | String | æ˜¯ | - | ç“¦ç‰‡çŸ©é˜µé›†åˆæ ‡è¯†ç¬¦ |
| TILEMATRIX | String | æ˜¯ | - | ç“¦ç‰‡çŸ©é˜µæ ‡è¯†ç¬¦ï¼ˆç¼©æ”¾çº§åˆ«ï¼‰ |
| TILEROW | Integer | æ˜¯ | - | ç“¦ç‰‡è¡Œå· |
| TILECOL | Integer | æ˜¯ | - | ç“¦ç‰‡åˆ—å· |

### WMTS RESTfulæœåŠ¡

**GET** `/map/wmts/{workspaceGroup}/{workspace}/{tileMatrix}/{tileRow}/{tileCol}.{format}`

RESTfulé£æ ¼çš„WMTSç“¦ç‰‡æœåŠ¡ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **RESTfulè®¾è®¡**: ç¬¦åˆRESTè®¾è®¡åŸåˆ™çš„URLç»“æ„
2. **æ ¼å¼åå•†**: åŸºäºURLæ‰©å±•åçš„æ ¼å¼åå•†
3. **æ€§èƒ½ä¼˜åŒ–**: é’ˆå¯¹RESTfulè®¿é—®æ¨¡å¼çš„æ€§èƒ½ä¼˜åŒ–

---

## ğŸ”ï¸ Javaåœ°å½¢æœåŠ¡

### åœ°å½¢ç“¦ç‰‡è·å–

**GET** `/terrain/{workspaceGroup}/{workspace}/{z}/{x}/{y}.terrain`

è·å–Cesiumæ ¼å¼çš„åœ°å½¢ç“¦ç‰‡æ•°æ®ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **Cesiumå…¼å®¹**: å®Œå…¨å…¼å®¹Cesiumåœ°å½¢ç“¦ç‰‡æ ¼å¼
2. **é‡åŒ–ç½‘æ ¼**: é«˜æ•ˆçš„é‡åŒ–ç½‘æ ¼æ•°æ®ç»“æ„
3. **æµå¼ä¼ è¾“**: æ”¯æŒå¤§æ–‡ä»¶çš„æµå¼ä¼ è¾“
4. **å‹ç¼©ä¼˜åŒ–**: æ™ºèƒ½å‹ç¼©ç­–ç•¥ï¼Œå¹³è¡¡æ–‡ä»¶å¤§å°å’Œè´¨é‡

#### è·¯å¾„å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| workspaceGroup | String | å·¥ä½œç©ºé—´ç»„åç§° |
| workspace | String | å·¥ä½œç©ºé—´åç§° |
| z | int | ç¼©æ”¾çº§åˆ« |
| x | int | Xåæ ‡ |
| y | int | Yåæ ‡ |

### Layer.jsonè·å–

**GET** `/terrain/{workspaceGroup}/{workspace}/layer.json`

è·å–åœ°å½¢å›¾å±‚çš„å…ƒæ•°æ®æ–‡ä»¶ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **å…ƒæ•°æ®ç®¡ç†**: è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤åœ°å½¢å…ƒæ•°æ®
2. **è¾¹ç•Œè®¡ç®—**: ç²¾ç¡®è®¡ç®—åœ°å½¢æ•°æ®çš„åœ°ç†è¾¹ç•Œ
3. **çº§åˆ«ç»Ÿè®¡**: ç»Ÿè®¡å¯ç”¨çš„ç¼©æ”¾çº§åˆ«èŒƒå›´
4. **JSONä¼˜åŒ–**: ä¼˜åŒ–çš„JSONç»“æ„ï¼Œæ”¯æŒå¿«é€Ÿè§£æ

---

## ğŸ—‚ï¸ Javaå·¥ä½œç©ºé—´æœåŠ¡

### åˆ›å»ºå·¥ä½œç©ºé—´

**POST** `/workspace/createWorkspace/{workspaceGroup}/{workspace}`

åˆ›å»ºæ–°çš„å·¥ä½œç©ºé—´ç›®å½•ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **ç›®å½•ç®¡ç†**: è‡ªåŠ¨åˆ›å»ºç›®å½•ç»“æ„
2. **æƒé™æ§åˆ¶**: è®¾ç½®åˆé€‚çš„ç›®å½•æƒé™
3. **å†²çªæ£€æµ‹**: æ£€æµ‹ç›®å½•æ˜¯å¦å·²å­˜åœ¨
4. **åŸå­æ“ä½œ**: ç¡®ä¿åˆ›å»ºæ“ä½œçš„åŸå­æ€§

### åˆ é™¤å·¥ä½œç©ºé—´

**DELETE** `/workspace/deleteWorkspace/{workspaceGroup}/{workspace}`

é€’å½’åˆ é™¤å·¥ä½œç©ºé—´åŠå…¶æ‰€æœ‰å†…å®¹ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **é€’å½’åˆ é™¤**: å®‰å…¨çš„é€’å½’åˆ é™¤ç®—æ³•
2. **äº‹åŠ¡ä¿æŠ¤**: åˆ é™¤å¤±è´¥æ—¶çš„å›æ»šæœºåˆ¶
3. **æƒé™éªŒè¯**: åˆ é™¤å‰è¿›è¡Œæƒé™éªŒè¯
4. **æ¸…ç†ä¼˜åŒ–**: é«˜æ•ˆçš„æ–‡ä»¶æ¸…ç†ç­–ç•¥

### å·¥ä½œç©ºé—´çŠ¶æ€ç®¡ç†

**GET** `/workspace/updateStatusWorkspace/{workspaceGroup}/{workspace}/{status}`

æ›´æ–°å·¥ä½œç©ºé—´çš„çŠ¶æ€ã€‚

#### ğŸ“ æ ¸å¿ƒæŠ€æœ¯
1. **çŠ¶æ€æœº**: åŸºäºçŠ¶æ€æœºçš„å·¥ä½œç©ºé—´çŠ¶æ€ç®¡ç†
2. **æ•°æ®åº“åŒæ­¥**: çŠ¶æ€å˜æ›´ä¸æ•°æ®åº“åŒæ­¥
3. **ç¼“å­˜æ›´æ–°**: è‡ªåŠ¨æ›´æ–°æœ¬åœ°ç¼“å­˜
4. **äº‹ä»¶é€šçŸ¥**: çŠ¶æ€å˜æ›´äº‹ä»¶é€šçŸ¥æœºåˆ¶

### åˆ›å»ºå·¥ä½œç©ºé—´ç»„

**POST** `/workspace/createWorkspaceGroup/{workspaceGroup}`

åˆ›å»ºå·¥ä½œç©ºé—´ç»„ã€‚

### åˆ é™¤å·¥ä½œç©ºé—´ç»„

**DELETE** `/workspace/deleteWorkspaceGroup/{workspaceGroup}`

åˆ é™¤å·¥ä½œç©ºé—´ç»„åŠå…¶æ‰€æœ‰å­å·¥ä½œç©ºé—´ã€‚

---

## ğŸ“š APIæ–‡æ¡£

### è·å–APIè·¯ç”±åˆ—è¡¨

**GET** `/api/routes`

è·å–æ‰€æœ‰APIæ¥å£çš„è¯¦ç»†ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®ã€‚

#### ğŸ“ æ¥å£é€»è¾‘
1. **ä»£ç æ–‡ä»¶è¯»å–**: è¯»å–å½“å‰Pythonæ–‡ä»¶çš„æºä»£ç 
2. **æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…**: ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰@app.routeè£…é¥°å™¨
3. **è·¯ç”±ä¿¡æ¯æå–**: æå–è·¯ç”±è·¯å¾„ã€HTTPæ–¹æ³•ã€å‡½æ•°åç­‰ä¿¡æ¯
4. **æ–‡æ¡£å­—ç¬¦ä¸²è§£æ**: è§£æå‡½æ•°çš„æ–‡æ¡£å­—ç¬¦ä¸²ä½œä¸ºæ¥å£æè¿°
5. **åˆ†ç±»å¤„ç†**: æ ¹æ®è·¯å¾„ç‰¹å¾å¯¹æ¥å£è¿›è¡ŒåŠŸèƒ½åˆ†ç±»
6. **å‚æ•°åˆ†æ**: åˆ†æè·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°
7. **ç»Ÿè®¡è®¡ç®—**: è®¡ç®—æ¥å£æ€»æ•°ã€åˆ†ç±»ç»Ÿè®¡ã€æ–¹æ³•ç»Ÿè®¡
8. **JSONå°è£…**: è¿”å›ç»“æ„åŒ–çš„APIæ–‡æ¡£ä¿¡æ¯

#### å“åº”å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| routes | array | è·¯ç”±åˆ—è¡¨ |
| routes[].path | string | è·¯ç”±è·¯å¾„ |
| routes[].methods | array | HTTPæ–¹æ³• |
| routes[].function | string | å‡½æ•°å |
| routes[].description | string | æ¥å£æè¿° |
| routes[].category | string | åŠŸèƒ½åˆ†ç±» |
| routes[].parameters | array | è·¯å¾„å‚æ•°ï¼ˆå¦‚æœæœ‰ï¼‰ |
| stats | object | ç»Ÿè®¡ä¿¡æ¯ |
| stats.totalRoutes | number | æ€»æ¥å£æ•° |
| stats.categories | object | åˆ†ç±»ç»Ÿè®¡ |
| stats.methods | object | æ–¹æ³•ç»Ÿè®¡ |
| generatedAt | string | ç”Ÿæˆæ—¶é—´ |

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "routes": [
    {
      "path": "/api/health",
      "methods": ["GET"],
      "function": "health_check",
      "description": "å¥åº·æ£€æŸ¥",
      "category": "ç³»ç»Ÿç›‘æ§"
    },
    {
      "path": "/api/tile/terrain",
      "methods": ["POST"],
      "function": "create_terrain_tiles",
      "description": "åˆ›å»ºåœ°å½¢ç“¦ç‰‡ï¼ˆæ”¯æŒè‡ªåŠ¨åˆå¹¶ï¼‰",
      "category": "ç“¦ç‰‡ç”Ÿæˆ"
    }
  ],
  "stats": {
    "totalRoutes": 25,
    "categories": {
      "ç³»ç»Ÿç›‘æ§": 1,
      "ç“¦ç‰‡ç”Ÿæˆ": 3,
      "ä»»åŠ¡ç®¡ç†": 5
    },
    "methods": {
      "GET": 8,
      "POST": 12,
      "PUT": 1,
      "DELETE": 4
    }
  },
  "generatedAt": "2025-01-08T16:45:00"
}
```

## ğŸ¯ æ¥å£è®¾è®¡åŸåˆ™

### å®‰å…¨æ€§åŸåˆ™
- **è·¯å¾„éªŒè¯**: æ‰€æœ‰æ¶‰åŠè·¯å¾„çš„æ“ä½œéƒ½ç»è¿‡ä¸¥æ ¼çš„å®‰å…¨éªŒè¯
- **å‚æ•°è¿‡æ»¤**: è¾“å…¥å‚æ•°ç»è¿‡éªŒè¯å’Œè¿‡æ»¤ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»
- **æƒé™æ§åˆ¶**: å®ç°åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œé¿å…ä¿¡æ¯æ³„éœ²

### æ€§èƒ½åŸåˆ™
- **å¼‚æ­¥å¤„ç†**: é•¿æ—¶é—´ä»»åŠ¡é‡‡ç”¨å¼‚æ­¥å¤„ç†ï¼Œé¿å…é˜»å¡
- **èµ„æºç®¡ç†**: æ™ºèƒ½çš„å†…å­˜å’ŒCPUèµ„æºåˆ†é…
- **ç¼“å­˜æœºåˆ¶**: åˆç†ä½¿ç”¨ç¼“å­˜æå‡å“åº”é€Ÿåº¦
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡æ“ä½œæé«˜å¤„ç†æ•ˆç‡

### å¯ç”¨æ€§åŸåˆ™
- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„ä»»åŠ¡çŠ¶æ€è·Ÿè¸ªå’Œè¿›åº¦ç›‘æ§
- **é”™è¯¯æ¢å¤**: æ”¯æŒä»»åŠ¡é‡å¯å’Œé”™è¯¯æ¢å¤æœºåˆ¶
- **ç”¨æˆ·å‹å¥½**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œæ“ä½œæŒ‡å¯¼
- **æ–‡æ¡£å®Œæ•´**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

### æ‰©å±•æ€§åŸåˆ™
- **æ¨¡å—åŒ–è®¾è®¡**: åŠŸèƒ½æ¨¡å—åŒ–ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **æ’ä»¶æ¶æ„**: æ”¯æŒæ’ä»¶å¼æ‰©å±•æ–°åŠŸèƒ½
- **ç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒAPIç‰ˆæœ¬ç®¡ç†å’Œå‘åå…¼å®¹
- **é…ç½®çµæ´»**: ä¸°å¯Œçš„é…ç½®é€‰é¡¹æ»¡è¶³ä¸åŒéœ€æ±‚

## ğŸ”§ æœ€ä½³å®è·µ

### æ¥å£è°ƒç”¨å»ºè®®
1. **å¥åº·æ£€æŸ¥**: å®šæœŸè°ƒç”¨å¥åº·æ£€æŸ¥æ¥å£ç›‘æ§æœåŠ¡çŠ¶æ€
2. **å‚æ•°éªŒè¯**: åœ¨å®¢æˆ·ç«¯è¿›è¡Œå‚æ•°éªŒè¯ï¼Œå‡å°‘é”™è¯¯è¯·æ±‚
3. **é”™è¯¯å¤„ç†**: å®ç°å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
4. **è¿›åº¦ç›‘æ§**: é•¿æ—¶é—´ä»»åŠ¡è¦å®šæœŸæŸ¥è¯¢è¿›åº¦çŠ¶æ€
5. **èµ„æºæ¸…ç†**: åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ä»»åŠ¡å’Œä¸´æ—¶æ–‡ä»¶

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. **åˆç†é…ç½®**: æ ¹æ®ç³»ç»Ÿèµ„æºé€‰æ‹©åˆé€‚çš„å¤„ç†å‚æ•°
2. **æ‰¹é‡å¤„ç†**: ä¼˜å…ˆä½¿ç”¨æ‰¹é‡æ¥å£å¤„ç†å¤šä¸ªæ–‡ä»¶
3. **å¼‚æ­¥è°ƒç”¨**: ä½¿ç”¨å¼‚æ­¥æ–¹å¼è°ƒç”¨é•¿æ—¶é—´ä»»åŠ¡
4. **ç¼“å­˜åˆ©ç”¨**: åˆç†åˆ©ç”¨ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
5. **ç›‘æ§å‘Šè­¦**: å®ç°èµ„æºç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

### é”™è¯¯å¤„ç†å»ºè®®
1. **çŠ¶æ€ç æ£€æŸ¥**: å§‹ç»ˆæ£€æŸ¥HTTPçŠ¶æ€ç å’Œå“åº”ç»“æœ
2. **é‡è¯•æœºåˆ¶**: å®ç°æŒ‡æ•°é€€é¿çš„é‡è¯•æœºåˆ¶
3. **æ—¥å¿—è®°å½•**: è®°å½•è¯¦ç»†çš„æ“ä½œæ—¥å¿—ä¾¿äºæ’æŸ¥é—®é¢˜
4. **è¶…æ—¶å¤„ç†**: è®¾ç½®åˆç†çš„è¯·æ±‚è¶…æ—¶æ—¶é—´
5. **é™çº§ç­–ç•¥**: å®ç°æœåŠ¡é™çº§å’Œç†”æ–­æœºåˆ¶

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.7  
**æœ€åæ›´æ–°**: 2025-07-16  
**ç»´æŠ¤å›¢é˜Ÿ/ä¸ªäºº**: å¾å® 